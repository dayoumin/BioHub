# AI 서비스 고도화 전략 (3대 핵심 기능)

본 문서는 플랫폼 내 AI 서비스의 일원화 및 고도화를 위한 기술 전략을 담고 있습니다.

## 1. 3대 핵심 AI 기능

### ❶ 분석 방법 추천 (Recommendation)
- **상담사 모드 (Consultant)**: 메인 허브 및 자연어 검색 시 적용. 사용자의 모호한 의도를 파악하여 통계적 방향성을 제시하는 친절한 가이드 페르소나.
- **진단관 모드 (Diagnostic)**: 데이터 로드 후 정밀 분석 시 적용. 실제 데이터의 수치와 통계적 가정(정규성 등)을 바탕으로 최적의 모델을 확정.

### ❷ 통계 처리 방법 안내 (Guidance)
- **실행 가이드**: 추천된 분석 방법을 실제로 어떻게 수행해야 하는지 안내.
- **상세 내용**:
    - 분석 메뉴 위치 (예: 분석 > 그룹 비교 > 독립표본 t-검정)
    - 변수 설정 (독립변수, 종속변수 매핑 제안)
    - 필요 전처리 (결측치 처리, 이상치 제거 등)

### ❸ 통계 결과 해석 (Interpretation)
- **인사이트 도출**: 복잡한 통계량(p-value, 효과크기 등)을 사용자가 이해할 수 있는 언어로 풀어서 설명.
- **구성**:
    - **한줄 요약**: 비전문가도 즉시 파악 가능한 핵심 결론.
    - **상세 해석**: 유의성, 효과크기의 강도, 실질적 의미 설명.
    - **후속 제안**: 분석 결과에 따른 다음 단계 Action Item 제시.

---

## 2. 통합 아키텍처 (Unification Strategy)

### LlmCoreService 통합
- `OpenRouter`와 `Ollama` 로직을 하나의 인터페이스로 통합.
- 사용자 설정(`useOllamaForRecommendation`)을 모든 AI 기능(추천, 안내, 해석)에서 일관되게 존중.
- 설정에 따른 우선순위:
    1. 사용자 선택 공급자 (Ollama 또는 OpenRouter)
    2. Fallback 공급자 (API/서버 상태에 따라 자동 전환)
    3. 최종 보루: `DecisionTree` 알고리즘 (AI 불가 시에도 중단 없는 서비스)

### 프롬프트 관리 (`prompts.ts`)
- 3가지 페르소나(Consultant, Diagnostic, Interpreter)를 단일 파일에서 관리하여 일관성 유지.
- 공급자(OpenRouter/Ollama)와 관계없이 동일한 핵심 논리 적용.
