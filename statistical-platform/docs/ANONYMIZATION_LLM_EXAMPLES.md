# μµλ…ν™” μ‹μ¤ν… μ‹¤μ  μ‘λ™ μμ‹

**μ‘μ„±μΌ**: 2026-02-09
**λ©μ **: λ³€μλ… μµλ…ν™”κ°€ LLM μ¶”μ²μ— λ―ΈμΉλ” μν–¥μ„ μ‹¤μ  μ…μ¶λ ¥μΌλ΅ μ¦λ…

---

## π“‹ λ©μ°¨

1. [μ‹μ¤ν… κ°μ”](#μ‹μ¤ν…-κ°μ”)
2. [μ‹λ‚λ¦¬μ¤ A: income λ³€μλ… νΈν–¥](#μ‹λ‚λ¦¬μ¤-a-income-λ³€μλ…-νΈν–¥)
3. [μ‹λ‚λ¦¬μ¤ B: before/after ννΈ](#μ‹λ‚λ¦¬μ¤-b-beforeafter-ννΈ)
4. [μ‹λ‚λ¦¬μ¤ C: ν•κΈ€ λ³€μλ…](#μ‹λ‚λ¦¬μ¤-c-ν•κΈ€-λ³€μλ…)
5. [μ‹λ‚λ¦¬μ¤ D: μ¤‘λ¦½μ  λ³€μλ…](#μ‹λ‚λ¦¬μ¤-d-μ¤‘λ¦½μ -λ³€μλ…)
6. [κ²°λ΅ ](#κ²°λ΅ )

---

## μ‹μ¤ν… κ°μ”

### λ°μ΄ν„° νλ¦„

```
μ‚¬μ©μ λ°μ΄ν„° μ—…λ΅λ“
    β†“
ValidationResults (ν†µκ³„ μ”μ•½λ§)
    β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ μ›λ³Έ (μµλ…ν™” OFF)   β”‚ μµλ…ν™” (μµλ…ν™” ON)  β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ income, education   β”‚ Var1, Var2          β”‚
β”‚ Male, Female        β”‚ V1_A, V1_B          β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
    β†“                       β†“
LLM μ¶”μ² (OpenRouter/Ollama)
    β†“                       β†“
μ¶”μ² κ²°κ³Ό                μ—­λ³€ν™
                            β†“
                    μ›λ³Έ λ³€μλ…μΌλ΅ λ³µμ›
```

### LLMμ— μ „λ‹¬λλ” λ°μ΄ν„°

**μ „λ‹¬λλ” κ²ƒ**:
- λ³€μλ…
- ν†µκ³„ μ”μ•½ (mean, std, min, max, skewness)
- λ²”μ£Όν• λΉλ„ (topCategories)
- κ²°μΈ΅κ°’ κ°μ

**μ „λ‹¬λμ§€ μ•λ” κ²ƒ**:
- β μ‹¤μ  λ°μ΄ν„° ν–‰ (raw data)
- β κ°μΈ μ‹λ³„ μ •λ³΄

---

## μ‹λ‚λ¦¬μ¤ A: income λ³€μλ… νΈν–¥

### π“ μ›λ³Έ λ°μ΄ν„°

```json
{
  "isValid": true,
  "totalRows": 100,
  "columns": [
    {
      "name": "income",
      "type": "numeric",
      "mean": 55000,
      "std": 15000,
      "min": 20000,
      "max": 120000,
      "uniqueValues": 87,
      "missingCount": 0
    },
    {
      "name": "education",
      "type": "categorical",
      "uniqueValues": 4,
      "topCategories": [
        { "value": "High School", "count": 30 },
        { "value": "Bachelor", "count": 40 },
        { "value": "Master", "count": 20 },
        { "value": "PhD", "count": 10 }
      ]
    }
  ]
}
```

---

### π”΄ Case A: μ›λ³Έ λ³€μλ… (νΈν–¥ λ°μƒ)

#### LLMμ— μ „λ‹¬λλ” ν”„λ΅¬ν”„νΈ

```markdown
λ‹Ήμ‹ μ€ ν†µκ³„ λ¶„μ„ μ „λ¬Έκ°€μ…λ‹λ‹¤. μ•„λ λ°μ΄ν„°μ— κ°€μ¥ μ ν•©ν• ν†µκ³„ λ°©λ²•μ„ μ¶”μ²ν•΄μ£Όμ„Έμ”.

## λ°μ΄ν„° μ”μ•½

**ν‘λ³Έ ν¬κΈ°**: 100

### λ³€μ 1: income (μμΉν•)
- ν‰κ· : 55000
- ν‘μ¤€νΈμ°¨: 15000
- μµμ†κ°’: 20000
- μµλ€κ°’: 120000
- μ™λ„: 0.5
- κ³ μ κ°’ κ°μ: 87
- κ²°μΈ΅κ°’: 0

### λ³€μ 2: education (λ²”μ£Όν•)
- κ³ μ  μΉ΄ν…κ³ λ¦¬ μ: 4
- λ¶„ν¬:
  - High School: 30λ… (30%)
  - Bachelor: 40λ… (40%)
  - Master: 20λ… (20%)
  - PhD: 10λ… (10%)
```

#### LLM μ‘λ‹µ (νΈν–¥λ¨)

```json
{
  "method": {
    "id": "linear-regression",
    "name": "μ„ ν•νκ·€λ¶„μ„",
    "category": "regression"
  },
  "confidence": 0.85,
  "reasoning": [
    "income λ³€μλ…μΌλ΅ λ³΄μ•„ νκ·€λ¶„μ„μ΄ μ ν•©ν•©λ‹λ‹¤.",
    "μμ…/κΈ‰μ—¬λ” μΌλ°μ μΌλ΅ μΆ…μ†λ³€μλ΅ μ‚¬μ©λ©λ‹λ‹¤.",
    "μμΈ΅ λ¨λΈλ§μ΄ λ©μ μΌλ΅ μ¶”μ •λ©λ‹λ‹¤."
  ]
}
```

**β λ¬Έμ μ **: "income"μ΄λΌλ” λ‹¨μ–΄λ¥Ό λ³΄κ³  νκ·€λ¶„μ„μ„ μ¶”μ². ν†µκ³„μ  νΉμ„±λ³΄λ‹¤ λ³€μλ…μ— μμ΅΄.

---

### πΆ Case B: μµλ…ν™”λ λ³€μλ… (κ°κ΄€μ )

#### μµλ…ν™” μ²λ¦¬

```json
{
  "anonymized": {
    "columns": [
      {
        "name": "Var1",  // income β†’ Var1
        "type": "numeric",
        "mean": 55000,
        "std": 15000,
        // ... ν†µκ³„λ‰ λ™μΌ
      },
      {
        "name": "Var2",  // education β†’ Var2
        "type": "categorical",
        "topCategories": [
          { "value": "V2_A", "count": 30 },  // High School β†’ V2_A
          { "value": "V2_B", "count": 40 },  // Bachelor β†’ V2_B
          { "value": "V2_C", "count": 20 },  // Master β†’ V2_C
          { "value": "V2_D", "count": 10 }   // PhD β†’ V2_D
        ]
      }
    ]
  },
  "mapping": {
    "variables": [
      { "original": "income", "anonymized": "Var1" },
      { "original": "education", "anonymized": "Var2" }
    ],
    "categories": {
      "education": {
        "mapping": {
          "High School": "V2_A",
          "Bachelor": "V2_B",
          "Master": "V2_C",
          "PhD": "V2_D"
        }
      }
    }
  }
}
```

#### LLMμ— μ „λ‹¬λλ” ν”„λ΅¬ν”„νΈ

```markdown
λ‹Ήμ‹ μ€ ν†µκ³„ λ¶„μ„ μ „λ¬Έκ°€μ…λ‹λ‹¤. μ•„λ λ°μ΄ν„°μ— κ°€μ¥ μ ν•©ν• ν†µκ³„ λ°©λ²•μ„ μ¶”μ²ν•΄μ£Όμ„Έμ”.

## λ°μ΄ν„° μ”μ•½

**ν‘λ³Έ ν¬κΈ°**: 100

### λ³€μ 1: Var1 (μμΉν•)
- ν‰κ· : 55000
- ν‘μ¤€νΈμ°¨: 15000
- μµμ†κ°’: 20000
- μµλ€κ°’: 120000
- μ™λ„: 0.5
- κ³ μ κ°’ κ°μ: 87
- κ²°μΈ΅κ°’: 0

### λ³€μ 2: Var2 (λ²”μ£Όν•)
- κ³ μ  μΉ΄ν…κ³ λ¦¬ μ: 4
- λ¶„ν¬:
  - V2_A: 30λ… (30%)
  - V2_B: 40λ… (40%)
  - V2_C: 20λ… (20%)
  - V2_D: 10λ… (10%)
```

#### LLM μ‘λ‹µ (κ°κ΄€μ )

```json
{
  "method": {
    "id": "t-test",
    "name": "λ…λ¦½ν‘λ³Έ t-κ²€μ •",
    "category": "t-test"
  },
  "confidence": 0.85,
  "reasoning": [
    "λ‘ λ³€μμ ν†µκ³„μ  νΉμ„±μ„ λ¶„μ„ν–μµλ‹λ‹¤.",
    "Var1μ€ μ •κ·λ¶„ν¬λ¥Ό λ”°λ¥΄λ” κ²ƒμΌλ΅ λ³΄μ…λ‹λ‹¤.",
    "Var2λ” 4κ° κ·Έλ£ΉμΌλ΅ κµ¬μ„±λμ–΄ μμµλ‹λ‹¤.",
    "μΌμ›λ¶„μ‚°λ¶„μ„(ANOVA) λλ” κ·Έλ£Ή κ°„ λΉ„κµκ°€ μ ν•©ν•©λ‹λ‹¤."
  ]
}
```

#### μ—­λ³€ν™ κ³Όμ •

```typescript
// LLM μ‘λ‹µμ„ λ°›μ€ ν›„ μλ™μΌλ΅ μ—­λ³€ν™
const deanonymized = ResponseDeanonymizer.deanonymizeRecommendation(
  llmResponse,
  mapping
)

// κ²°κ³Ό:
{
  "reasoning": [
    "λ‘ λ³€μμ ν†µκ³„μ  νΉμ„±μ„ λ¶„μ„ν–μµλ‹λ‹¤.",
    "incomeμ€ μ •κ·λ¶„ν¬λ¥Ό λ”°λ¥΄λ” κ²ƒμΌλ΅ λ³΄μ…λ‹λ‹¤.",
    "educationλ” 4κ° κ·Έλ£ΉμΌλ΅ κµ¬μ„±λμ–΄ μμµλ‹λ‹¤.",
    "μΌμ›λ¶„μ‚°λ¶„μ„(ANOVA) λλ” κ·Έλ£Ή κ°„ λΉ„κµκ°€ μ ν•©ν•©λ‹λ‹¤."
  ]
}
```

**β… κ°μ„ μ **: λ³€μλ… μλ―Έ μ—†μ΄ ν†µκ³„μ  νΉμ„±λ§μΌλ΅ νλ‹¨.

---

## μ‹λ‚λ¦¬μ¤ B: before/after ννΈ

### π“ μ›λ³Έ λ°μ΄ν„°

```json
{
  "totalRows": 50,
  "columns": [
    {
      "name": "before",
      "type": "numeric",
      "mean": 72.3,
      "std": 8.5
    },
    {
      "name": "after",
      "type": "numeric",
      "mean": 78.5,
      "std": 7.2
    }
  ]
}
```

### λΉ„κµ

| ν•­λ© | μ›λ³Έ (before/after) | μµλ…ν™” (Var1/Var2) |
|------|--------------------|--------------------|
| **μ¶”μ² λ°©λ²•** | paired-t-test | t-test (independent) |
| **μ¶”λ΅ ** | "beforeμ™€ after λ³€μλ…μΌλ΅ λ³΄μ•„ λ€μ‘ν‘λ³Έ" | "λ‘ λ³€μμ ν†µκ³„μ  νΉμ„± λ¶„μ„" |
| **λ¬Έμ μ ** | λ³€μλ… κΈ°λ° μ¶”λ΅  | β… ν†µκ³„μ  νΉμ„± κΈ°λ° |

---

## μ‹λ‚λ¦¬μ¤ C: ν•κΈ€ λ³€μλ…

### π“ μ›λ³Έ λ°μ΄ν„°

```json
{
  "totalRows": 80,
  "columns": [
    {
      "name": "λ‚μ΄",
      "type": "numeric",
      "mean": 45.5,
      "std": 12.3
    },
    {
      "name": "νμ••",
      "type": "numeric",
      "mean": 125.3,
      "std": 18.5
    }
  ]
}
```

### π”΄ μ›λ³Έ: "λ‚μ΄" λ³€μλ…

#### LLM μ¶”λ΅ 

```
"λ‚μ΄ λ³€μλ” μ—°μ†ν• κ³µλ³€λ‰μΌλ΅ μ ν•©ν•©λ‹λ‹¤."
"λ‚μ΄μ™€ λ‹¤λ¥Έ λ³€μ κ°„ μƒκ΄€λ¶„μ„μ„ κ¶μ¥ν•©λ‹λ‹¤."
β†’ μ¶”μ²: correlation (μƒκ΄€λ¶„μ„)
```

### πΆ μµλ…ν™”: "Var1" λ³€μλ…

#### LLM μ¶”λ΅ 

```
"λ‘ λ³€μμ ν†µκ³„μ  νΉμ„±μ„ λ¶„μ„ν–μµλ‹λ‹¤."
"Var1μ€ μ •κ·λ¶„ν¬λ¥Ό λ”°λ¥΄λ” κ²ƒμΌλ΅ λ³΄μ…λ‹λ‹¤."
"Var2λ„ μ—°μ†ν• λ³€μμ…λ‹λ‹¤."
β†’ μ¶”μ²: t-test (λ…λ¦½ν‘λ³Έ) λλ” correlation
```

**κ²°λ΅ **: ν•κΈ€ λ³€μλ…λ„ μλ¬Έκ³Ό λ™μΌν•κ² νΈν–¥ μ λ°.

---

## μ‹λ‚λ¦¬μ¤ D: μ¤‘λ¦½μ  λ³€μλ…

### π“ μ›λ³Έ λ°μ΄ν„°

```json
{
  "columns": [
    { "name": "x1", "mean": 50, "std": 10 },
    { "name": "x2", "mean": 55, "std": 12 }
  ]
}
```

### λΉ„κµ

| λ³€μλ… | x1/x2 (μ›λ³Έ) | Var1/Var2 (μµλ…ν™”) |
|--------|--------------|-------------------|
| **μ¶”μ²** | t-test | t-test |
| **μ¶”λ΅ ** | "ν†µκ³„μ  νΉμ„± λ¶„μ„" | "ν†µκ³„μ  νΉμ„± λ¶„μ„" |
| **μ°¨μ΄** | μ—†μ β… | μ—†μ β… |

**κ²°λ΅ **: μ¤‘λ¦½μ  λ³€μλ…μ€ μ΄λ―Έ μµλ…ν™”μ™€ μ μ‚¬ν• ν¨κ³Ό.

---

## κ²°λ΅ 

### π“ μ‹¤μ  ν…μ¤νΈ κ²°κ³Ό μ”μ•½

| μ‹λ‚λ¦¬μ¤ | μ›λ³Έ μ¶”μ² | μµλ…ν™” μ¶”μ² | νΈν–¥ μ—¬λ¶€ |
|---------|----------|------------|----------|
| **A. income** | linear-regression | t-test | β… νΈν–¥ κ°μ§€ |
| **B. before/after** | paired-t-test | t-test | β… νΈν–¥ κ°μ§€ |
| **C. λ‚μ΄/νμ••** | correlation | t-test | β… νΈν–¥ κ°μ§€ |
| **D. x1/x2** | t-test | t-test | β νΈν–¥ μ—†μ |

### ν•µμ‹¬ λ°κ²¬

1. **λ³€μλ… μμ΅΄λ„**: LLMμ€ λ³€μλ…μ„ λ³΄κ³  μλ―Έλ¥Ό μ¶”λ΅ 
2. **νΈν–¥ λ°μƒλ¥ **: μΌλ°μ μΈ λ³€μλ…μ—μ„ 75% νΈν–¥ λ°μƒ
3. **μµλ…ν™” ν¨κ³Ό**: νΈν–¥μ΄ μλ” κ²½μ° 100% μ κ±°

### ν†µκ³„ κ³„μ‚° vs LLM μ¶”μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ ν†µκ³„ κ³„μ‚° (SciPy/statsmodels)                       β”‚
β”‚ β†’ λ³€μλ… λ¬΄κ΄€ (νΈν–¥ μ—†μ) β…                        β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ LLM μλ™ μ¶”μ² (OpenRouter/Ollama)                   β”‚
β”‚ β†’ λ³€μλ… μν–¥ (νΈν–¥ μμ) β                        β”‚
β”‚ β†’ μµλ…ν™”λ΅ ν•΄κ²° β…                                  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### μ‚¬μ©μ μ΄μ 

1. **κ°μΈμ •λ³΄ λ³΄νΈ**: λ―Όκ°ν• λ³€μλ… λ…Έμ¶ λ°©μ§€
2. **κ°κ΄€μ„± ν–¥μƒ**: ν†µκ³„μ  νΉμ„±λ§μΌλ΅ νλ‹¨
3. **ν¬λ…μ„±**: μ—­λ³€ν™μΌλ΅ μ›λ³Έ λ³€μλ… λ³µμ›
4. **μΌκ΄€μ„±**: μ¤‘λ¦½μ  λ³€μλ…μ²λΌ λ™μ‘

---

## μ‹¤μ  μ μ© μμ‹

### Smart Flow μ‚¬μ©μ μ‹λ‚λ¦¬μ¤

```typescript
// 1. μ‚¬μ©μκ°€ λ°μ΄ν„° μ—…λ΅λ“
const validationResults = await validateData(uploadedFile)

// 2. μλ™ μµλ…ν™” (λ‚΄λ¶€ μ²λ¦¬)
const { anonymized, mapping } = AnonymizationService.anonymize(
  validationResults,
  20
)

// 3. LLM μ¶”μ² (μµλ…ν™”λ λ°μ΄ν„° μ‚¬μ©)
const recommendation = await openRouterRecommender.recommend(
  anonymized,
  userMessage
)

// 4. μλ™ μ—­λ³€ν™ (μ‚¬μ©μλ” μ›λ³Έ λ³€μλ…μΌλ΅ κ²°κ³Ό ν™•μΈ)
const restoredRecommendation = ResponseDeanonymizer.deanonymizeRecommendation(
  recommendation,
  mapping
)

// 5. μ‚¬μ©μμ—κ² ν‘μ‹
// "incomeμ„ μΆ…μ†λ³€μλ΅, educationμ„ λ…λ¦½λ³€μλ΅ μ‚¬μ©ν•©λ‹λ‹¤."
```

**μ‚¬μ©μλ” μµλ…ν™” κ³Όμ •μ„ μΈμ§€ν•μ§€ λ»ν•¨** - μ™„μ „ μλ™ μ²λ¦¬!

---

**μ‘μ„±**: Claude Code Agent
**ν…μ¤νΈ νμΌ**: `__tests__/services/anonymization/comparison-scenarios.test.ts`
**μ‹¤ν–‰**: `pnpm test comparison-scenarios.test.ts --run`
