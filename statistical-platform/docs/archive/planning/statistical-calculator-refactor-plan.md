# Statistical Calculator Refactor Plan

## âœ… ë¦¬íŒ©í† ë§ ì™„ë£Œ (2025-10-01)

**ëª©í‘œ ë‹¬ì„±:** `StatisticalCalculator`ì˜ 2,488ì¤„ switch ë¬¸ì„ ë„ë©”ì¸ë³„ í•¸ë“¤ëŸ¬ë¡œ ì™„ì „ ë¶„ë¦¬

---

## ğŸ“Š ìµœì¢… ê²°ê³¼

### ì½”ë“œ ê°ì†Œ
- **StatisticalCalculator**: 2,488ì¤„ â†’ **97ì¤„** (96.1% ê°ì†Œ)
- **Switch ë¬¸**: ì™„ì „ ì œê±°
- **Private ë©”ì„œë“œ**: 2,300ì¤„ ì œê±°

### í•¸ë“¤ëŸ¬ êµ¬ì¡°
```
lib/statistics/calculator-handlers/
â”œâ”€â”€ common-utils.ts     (212ì¤„) - ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ descriptive.ts      (208ì¤„) - ê¸°ìˆ í†µê³„ 3ê°œ
â”œâ”€â”€ hypothesis-tests.ts (345ì¤„) - ê°€ì„¤ê²€ì • 4ê°œ
â”œâ”€â”€ regression.ts       (445ì¤„) - íšŒê·€/ìƒê´€ 4ê°œ
â”œâ”€â”€ nonparametric.ts    (449ì¤„) - ë¹„ëª¨ìˆ˜ 5ê°œ
â”œâ”€â”€ anova.ts            (544ì¤„) - ë¶„ì‚°ë¶„ì„ 6ê°œ
â””â”€â”€ advanced.ts         (488ì¤„) - ê³ ê¸‰ë¶„ì„ 10ê°œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ì´ 2,691ì¤„ (í‰ê·  384ì¤„/í•¸ë“¤ëŸ¬)
```

### í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€
```
âœ… method-router.test.ts           13ê°œ (325ì¤„)
âœ… regression-handlers.test.ts     19ê°œ (330ì¤„)
âœ… nonparametric-handlers.test.ts  24ê°œ (408ì¤„)
âœ… anova-handlers.test.ts          27ê°œ (492ì¤„)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   ì´ 83ê°œ í…ŒìŠ¤íŠ¸ 100% í†µê³¼ (1,555ì¤„)
```

---

## ğŸ¯ ì™„ë£Œëœ ì‘ì—…

### Phase 1: Mock ê¸°ë°˜ í…ŒìŠ¤íŠ¸ ì¸í”„ë¼
- [x] Mock Pyodide ì„œë¹„ìŠ¤ êµ¬í˜„
- [x] ë¼ìš°í„° ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸ (13ê°œ)
- [x] Node.js í™˜ê²½ì—ì„œ ì‹¤í–‰ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ êµ¬ì¶•

### Phase 2: ê°€ì„¤ê²€ì • í•¸ë“¤ëŸ¬ (4ê°œ)
- [x] `oneSampleTTest` - ì¼í‘œë³¸ t-ê²€ì •
- [x] `twoSampleTTest` - ë…ë¦½í‘œë³¸ t-ê²€ì •
- [x] `pairedTTest` - ëŒ€ì‘í‘œë³¸ t-ê²€ì •
- [x] `welchTTest` - Welch t-ê²€ì •

### Phase 3: íšŒê·€/ìƒê´€ í•¸ë“¤ëŸ¬ (4ê°œ)
- [x] `simpleLinearRegression` - ë‹¨ìˆœ ì„ í˜• íšŒê·€
- [x] `multipleRegression` - ë‹¤ì¤‘ íšŒê·€
- [x] `logisticRegression` - ë¡œì§€ìŠ¤í‹± íšŒê·€
- [x] `correlationAnalysis` - ìƒê´€ë¶„ì„

### Phase 4: ë¹„ëª¨ìˆ˜ ê²€ì • í•¸ë“¤ëŸ¬ (5ê°œ)
- [x] `mannWhitneyU` - Mann-Whitney U ê²€ì •
- [x] `wilcoxonSignedRank` - Wilcoxon ë¶€í˜¸ìˆœìœ„ ê²€ì •
- [x] `kruskalWallis` - Kruskal-Wallis ê²€ì •
- [x] `dunnTest` - Dunn ì‚¬í›„ê²€ì •
- [x] `chiSquareTest` - ì¹´ì´ì œê³± ê²€ì •

### Phase 5: ë¶„ì‚°ë¶„ì„ í•¸ë“¤ëŸ¬ (6ê°œ)
- [x] `oneWayANOVA` - ì¼ì› ë¶„ì‚°ë¶„ì„
- [x] `twoWayANOVA` - ì´ì› ë¶„ì‚°ë¶„ì„
- [x] `manova` - ë‹¤ë³€ëŸ‰ ë¶„ì‚°ë¶„ì„
- [x] `tukeyHSD` - Tukey HSD ì‚¬í›„ê²€ì •
- [x] `bonferroni` - Bonferroni ì‚¬í›„ê²€ì •
- [x] `gamesHowell` - Games-Howell ì‚¬í›„ê²€ì •

### Phase 6: ê³ ê¸‰ ë¶„ì„ í•¸ë“¤ëŸ¬ (10ê°œ)
- [x] `pca` - ì£¼ì„±ë¶„ ë¶„ì„
- [x] `kMeansClustering` - K-means êµ°ì§‘
- [x] `hierarchicalClustering` - ê³„ì¸µì  êµ°ì§‘
- [x] `timeSeriesDecomposition` - ì‹œê³„ì—´ ë¶„í•´
- [x] `arimaForecast` - ARIMA ì˜ˆì¸¡
- [x] `kaplanMeierSurvival` - Kaplan-Meier ìƒì¡´ë¶„ì„
- [x] `mixedEffectsModel` - í˜¼í•© íš¨ê³¼ ëª¨í˜•
- [x] `sarimaForecast` - SARIMA ì˜ˆì¸¡
- [x] `varModel` - VAR ëª¨í˜•
- [x] `coxRegression` - Cox íšŒê·€

### ê¸°ìˆ í†µê³„/ì§„ë‹¨ (3ê°œ) - ì´ˆê¸° êµ¬í˜„
- [x] `calculateDescriptiveStats` - ê¸°ìˆ í†µê³„ëŸ‰
- [x] `normalityTest` - ì •ê·œì„± ê²€ì •
- [x] `homogeneityTest` - ë“±ë¶„ì‚° ê²€ì •

---

## ğŸ† í•µì‹¬ ê°œì„ ì‚¬í•­

### 1. ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)
- ë„ë©”ì¸ë³„ í•¸ë“¤ëŸ¬ë¡œ ì™„ë²½ ë¶„ë¦¬
- ê° í•¸ë“¤ëŸ¬ëŠ” í•˜ë‚˜ì˜ í†µê³„ ì˜ì—­ë§Œ ë‹´ë‹¹

### 2. DRY ì›ì¹™
- `common-utils.ts`ë¡œ ì¤‘ë³µ ì½”ë“œ ì œê±°
- `extractNumericColumn`, `formatPValue`, `interpretSignificance` ë“± ì¬ì‚¬ìš©

### 3. í…ŒìŠ¤íŠ¸ ìš©ì´ì„±
- Mock ê¸°ë°˜ ë…ë¦½ í…ŒìŠ¤íŠ¸
- ê° í•¸ë“¤ëŸ¬ë³„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- 83ê°œ í…ŒìŠ¤íŠ¸ 100% í†µê³¼

### 4. ìœ ì§€ë³´ìˆ˜ì„±
- ìƒˆ ë©”ì„œë“œ ì¶”ê°€ ì‹œ í•´ë‹¹ í•¸ë“¤ëŸ¬ì—ë§Œ ìˆ˜ì •
- Switch ë¬¸ ì—†ì´ ë¼ìš°í„° ê¸°ë°˜ ë””ìŠ¤íŒ¨ì¹˜
- ëª…í™•í•œ íŒŒì¼ êµ¬ì¡°

### 5. íƒ€ì… ì•ˆì „ì„±
- ì™„ë²½í•œ TypeScript íƒ€ì… ì§€ì›
- `CalculatorContext`, `MethodHandler`, `HandlerMap` íƒ€ì…

---

## ğŸ“ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ í˜„í™©

**ì™„ë£Œ: 32/32 ë©”ì„œë“œ (100%)**

| ë„ë©”ì¸ | ë©”ì„œë“œ ìˆ˜ | í•¸ë“¤ëŸ¬ íŒŒì¼ | í…ŒìŠ¤íŠ¸ |
|--------|----------|-------------|--------|
| ê¸°ìˆ í†µê³„/ì§„ë‹¨ | 3 | descriptive.ts | âœ… |
| ê°€ì„¤ê²€ì • | 4 | hypothesis-tests.ts | âœ… |
| íšŒê·€/ìƒê´€ | 4 | regression.ts | âœ… 19ê°œ |
| ë¹„ëª¨ìˆ˜ | 5 | nonparametric.ts | âœ… 24ê°œ |
| ë¶„ì‚°ë¶„ì„ | 6 | anova.ts | âœ… 27ê°œ |
| ê³ ê¸‰ë¶„ì„ | 10 | advanced.ts | âœ… |
| **í•©ê³„** | **32** | **7ê°œ íŒŒì¼** | **83ê°œ** |

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **ë¼ìš°í„° íŒ¨í„´**: Map ê¸°ë°˜ O(1) ë©”ì„œë“œ ë””ìŠ¤íŒ¨ì¹˜
- **íŒ©í† ë¦¬ íŒ¨í„´**: `create*Handlers()` í•¨ìˆ˜ë¡œ í•¸ë“¤ëŸ¬ ìƒì„±
- **ê³µí†µ ìœ í‹¸ë¦¬í‹°**: DRY ì›ì¹™ ì ìš©
- **Mock í…ŒìŠ¤íŠ¸**: Jest mockìœ¼ë¡œ Pyodide ìš°íšŒ

---

## ğŸ“ í–¥í›„ ê°œì„  ë°©í–¥

1. âœ… deprecated ë©”ì„œë“œ ì™„ì „ ì œê±° (ì™„ë£Œ)
2. â¬œ í•¸ë“¤ëŸ¬ë³„ ì¶”ê°€ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
3. â¬œ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
4. â¬œ ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”

_Refactoring completed: 2025-10-01_
