"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6647],{66647:(e,t,r)=>{r.d(t,{getRecommendedEmbeddingModel:()=>s,getRecommendedModel:()=>u});let l={F32:4,F16:2,Q8_0:1,Q8_1:1,Q6_K:.75,Q5_K_M:.64,Q5_K_S:.64,Q4_K_M:.56,Q4_K_S:.56,Q4_0:.56,Q4_1:.56,Q3_K_M:.42,Q3_K_S:.42,Q3_K_L:.42,Q2_K:.33,IQ2_XXS:.25,IQ2_XS:.27,IQ2_S:.29,IQ2_M:.3},n={qwen3:1,gemma3:2,"llama3.2":3,"llama3.1":4,deepseek:5,exaone:6,"qwen2.5":7,gemma2:8,llama3:9,mistral:10,qwen2:11,llama2:12,phi3:13,phi:14};function a(e){var t,r;let n=function(e){if(!e)return 0;let t=e.match(/^([\d.]+)/);return t?parseFloat(t[1]):0}(null==(t=e.details)?void 0:t.parameter_size)*function(e){if(!e)return .56;let t=l[e];if(void 0!==t)return t;for(let[t,r]of Object.entries(l))if(e.includes(t))return r;return .56}(null==(r=e.details)?void 0:r.quantization_level)*1.2;return n<=0?Math.max(Math.ceil(.7*((e.size||0)/0x40000000)),1):Math.ceil(n)}async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:11434";try{let t=await fetch("".concat(e,"/api/show"));if(!t.ok)return{};let r=await t.json();if("object"==typeof r&&null!==r){let e={};if("memory"in r&&"object"==typeof r.memory&&null!==r.memory){let t=r.memory;"total"in t&&"number"==typeof t.total&&(e.memory={total:t.total})}return"gpus"in r&&Array.isArray(r.gpus)&&(e.gpus=r.gpus.map(e=>"object"!=typeof e||null===e?null:"string"==typeof e.name&&"string"==typeof e.driver&&"number"==typeof e.memory?{name:e.name,driver:e.driver,memory:e.memory}:null).filter(e=>null!==e)),e}return{}}catch(e){return{}}}async function o(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:11434",r=await i(t);return r.gpus&&r.gpus.length>0?Math.max(...r.gpus.map(e=>e.memory))/0x40000000:(null==(e=r.memory)?void 0:e.total)?r.memory.total/0x40000000:8}async function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:11434";try{let t=await fetch("".concat(e,"/api/tags"));if(!t.ok)return[];let r=await t.json();if("object"!=typeof r||null===r||!Array.isArray(r.models))return[];return r.models.map(e=>{if("object"!=typeof e||null===e||"string"!=typeof e.name)return null;let t={name:e.name};if("string"==typeof e.model&&(t.model=e.model),"number"==typeof e.size&&(t.size=e.size),"object"==typeof e.details&&null!==e.details){let r=e.details,l={};"string"==typeof r.parent_model&&(l.parent_model=r.parent_model),"string"==typeof r.format&&(l.format=r.format),"string"==typeof r.family&&(l.family=r.family),Array.isArray(r.families)&&(l.families=r.families.filter(e=>"string"==typeof e)),"string"==typeof r.parameter_size&&(l.parameter_size=r.parameter_size),"string"==typeof r.quantization_level&&(l.quantization_level=r.quantization_level),t.details=l}return t}).filter(e=>null!==e)}catch(e){return[]}}async function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:11434";try{let t=await o(e),r=await m(e);if(0===r.length)return null;return function(e,t){let r=e.filter(e=>!e.name.toLowerCase().includes("embed")&&!e.name.toLowerCase().includes("embedding"));if(0===r.length)return null;let l=.8*t,i=r.map(e=>({model:e,vram:a(e),priority:function(e){let t=e.toLowerCase();for(let[e,r]of Object.entries(n))if(t.includes(e))return r;return 100}(e.name)})),o=i.filter(e=>e.vram<=l).sort((e,t)=>e.priority!==t.priority?e.priority-t.priority:t.vram-e.vram);if(0===o.length){let e=i.sort((e,t)=>e.vram-t.vram)[0];return e?e.model.name:null}return o[0].model.name}(r,t)}catch(e){return null}}async function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost:11434";try{let t=await o(e),r=await m(e);if(0===r.length)return null;return function(e,t){let r=e.filter(e=>e.name.toLowerCase().includes("embed")||e.name.toLowerCase().includes("embedding"));if(0===r.length)return null;let l={"nomic-embed-text":1,"mxbai-embed-large":2,"all-minilm":3,"snowflake-arctic-embed":4,"qwen3-embedding":5,llama2:6},n=r.map(e=>({model:e,vram:a(e),priority:function(e){let t=e.toLowerCase();for(let[e,r]of Object.entries(l))if(t.includes(e))return r;let r=a({name:e,size:void 0,details:void 0});return r<=1?10:r<=2?20:r<=4?30:100}(e.name)}));n.forEach(e=>{});let i=.5*t,o=n.filter(e=>e.vram<=i).sort((e,t)=>e.priority!==t.priority?e.priority-t.priority:e.vram-t.vram);if(0===o.length){let e=n.sort((e,t)=>e.vram-t.vram)[0];return e?e.model.name:null}return o[0].model.name}(r,t)}catch(e){return null}}}}]);