(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8980],{30497:(e,r,t)=>{"use strict";t.d(r,{m:()=>o,w:()=>l});var n=t(95155),s=t(12115),a=t(672);async function d(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=null;for(let s=0;s<r;s++)try{return await e()}catch(e){n=e,s<r-1&&await new Promise(e=>setTimeout(e,t*Math.pow(2,s)))}throw n||Error("Pyodide operation failed after all retries")}let i=(0,s.createContext)({isLoaded:!1,isLoading:!1,error:null,service:null});function l(){return(0,s.useContext)(i)}function o(e){let{children:r}=e,[t,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null),[x,f]=(0,s.useState)(null),[h,g]=(0,s.useState)(!1),b=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(h){let e=setTimeout(()=>{g(!1)},3e3);return()=>clearTimeout(e)}},[h]);let p=(0,s.useCallback)(async()=>{let e=a.P.getInstance();c(!0),m(null);try{let r=performance.now();await d(()=>e.initialize(),3,1e3),((performance.now()-r)/1e3).toFixed(2),f(e),l(!0),g(!0)}catch(e){m(e instanceof Error?e.message:"Pyodide 초기화 실패")}finally{c(!1)}},[]);return(0,s.useEffect)(()=>{let e=a.P.getInstance();if(e.isInitialized()){f(e),l(!0),c(!1);return}b.current||(b.current=!0,p())},[p]),(0,n.jsxs)(i.Provider,{value:{isLoaded:t,isLoading:o,error:u,service:x},children:[r,o&&(0,n.jsx)("div",{className:"fixed bottom-4 right-4 bg-background/80 backdrop-blur-sm border rounded-lg p-3 shadow-sm z-50",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-primary"}),(0,n.jsx)("span",{className:"text-muted-foreground",children:"통계 엔진 로딩중..."})]})}),u&&(0,n.jsx)("div",{className:"fixed bottom-4 right-4 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3 shadow-sm z-50",children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400",children:(0,n.jsx)("span",{children:"⚠️ 통계 엔진 로드 실패"})}),(0,n.jsx)("button",{onClick:()=>{m(null),b.current=!1,p()},className:"text-xs text-red-600 dark:text-red-400 underline hover:no-underline",children:"다시 시도"})]})}),h&&(0,n.jsx)("div",{className:"fixed bottom-4 right-4 bg-green-100 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 shadow-sm z-50 animate-in fade-in slide-in-from-bottom-2 duration-300",children:(0,n.jsx)("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:(0,n.jsx)("span",{children:"✅ 통계 엔진 준비 완료"})})})]})}},80709:(e,r,t)=>{Promise.resolve().then(t.bind(t,96788))},96788:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var n=t(95155),s=t(30497);function a(e){let{children:r}=e;return(0,n.jsx)(s.m,{children:r})}}},e=>{e.O(0,[6526,672,8441,1255,7358],()=>e(e.s=80709)),_N_E=e.O()}]);