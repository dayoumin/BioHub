(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1236],{12168:(e,s,n)=>{"use strict";n.d(s,{ib:()=>l});var t,a=n(95704);let r="v0.28.3",i={VERSION:r,OVERRIDE_VERSION:void 0!==a&&(null==(t=a.env)?void 0:t.NEXT_PUBLIC_PYODIDE_VERSION),CDN_URL:"https://cdn.jsdelivr.net/pyodide/".concat(r,"/full/"),SCRIPT_URL:"https://cdn.jsdelivr.net/pyodide/".concat(r,"/full/pyodide.js"),PACKAGES:["numpy","scipy","pandas"],LOADING_PROGRESS:{IDLE:0,BASIC:40,SCIPY:80,READY:100},TIMEOUT:{LOAD_SCRIPT:3e4,LOAD_PACKAGES:6e4}};function l(){var e,s;if(void 0!==a&&(null==(e=a.env)?void 0:e.NEXT_PUBLIC_PYODIDE_USE_LOCAL)==="true"){let e=void 0!==a&&(null==(s=a.env)?void 0:s.NEXT_PUBLIC_PYODIDE_LOCAL_PATH)||"/pyodide/";return{version:"local",indexURL:e,scriptURL:"".concat(e,"pyodide.js"),isLocal:!0}}let n=i.OVERRIDE_VERSION||i.VERSION,t="https://cdn.jsdelivr.net/pyodide/".concat(n,"/full");return{version:n,indexURL:"".concat(t,"/"),scriptURL:"".concat(t,"/pyodide.js"),isLocal:!1}}Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER},17607:(e,s,n)=>{Promise.resolve().then(n.bind(n,93284))},17982:(e,s,n)=>{"use strict";n.d(s,{C:()=>o,z:()=>d});var t=n(95155),a=n(12115),r=n(24058),i=n(99051),l=n(25016);let d=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,t.jsx)(r.bL,{className:(0,l.cn)("grid gap-2",n),...a,ref:s})});d.displayName=r.bL.displayName;let o=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,t.jsx)(r.q7,{ref:s,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...a,children:(0,t.jsx)(r.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(i.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=r.q7.displayName},32559:(e,s,n)=>{"use strict";n.d(s,{Fc:()=>l,TN:()=>o,XL:()=>d});var t=n(95155);n(12115);var a=n(83101),r=n(25016);let i=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:n,...a}=e;return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(i({variant:n}),s),...a})}function d(e){let{className:s,...n}=e;return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,r.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",s),...n})}function o(e){let{className:s,...n}=e;return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...n})}},33565:(e,s,n)=>{"use strict";n.d(s,{Yo:()=>c});let t=(0,n(12168).ib)(),a=null,r=null,i=new Set;async function l(){if(window.loadPyodide)return;let e=document.createElement("script");e.src=t.scriptURL,e.async=!0,await new Promise((s,n)=>{e.onload=()=>{s()},e.onerror=e=>{n(Error("Pyodide CDN 스크립트 로드 실패"))},document.head.appendChild(e)})}async function d(){return await l(),await window.loadPyodide({indexURL:t.indexURL})}async function o(){if(a)return a;if(r)return r;r=d();try{return a=await r}finally{r=null}}async function c(e){let s=await o(),n=e.filter(e=>!i.has(e));return n.length>0&&(await s.loadPackage(n),n.forEach(e=>i.add(e))),s}},33789:(e,s,n)=>{"use strict";n.d(s,{p:()=>r});var t=n(95155);n(12115);var a=n(25016);function r(e){let{className:s,type:n,...r}=e;return(0,t.jsx)("input",{type:n,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...r})}},43150:(e,s,n)=>{"use strict";n.d(s,{C:()=>t,D:()=>a});let t={MAX_ROWS:1e5,MAX_COLS:1e3,MAX_FILE_SIZE:0x3200000,WARN_FILE_SIZE:0xa00000};class a{static async validateFileContent(e){try{let s=e.slice(0,1024),n=await s.text();if(!/^[a-zA-Z0-9가-힣\s,.\-_"'()[\]{}:;!?@#$%^&*+=\n\r]+$/.test(n))return{isValid:!1,error:"파일에 허용되지 않은 문자가 포함되어 있습니다."};for(let e of[/<script/i,/javascript:/i,/on\w+\s*=/i,/<iframe/i,/eval\(/i,/document\./i,/window\./i])if(e.test(n))return{isValid:!1,error:"보안상 위험한 내용이 감지되었습니다."};return{isValid:!0}}catch(e){return{isValid:!1,error:"파일 검증 중 오류가 발생했습니다."}}}static performValidation(e){let s={isValid:!0,totalRows:0,columnCount:0,missingValues:0,dataType:"mixed",variables:[],errors:[],warnings:[]};if(!e||0===e.length)return s.isValid=!1,s.errors.push("데이터가 없습니다."),s;if(s.totalRows=e.length,s.totalRows>t.MAX_ROWS)return s.isValid=!1,s.errors.push("데이터가 너무 많습니다. 최대 ".concat(t.MAX_ROWS.toLocaleString(),"행까지 처리 가능합니다. ")+"(현재: ".concat(s.totalRows.toLocaleString(),"행)")),s;s.totalRows>1e4&&s.warnings.push("데이터가 많습니다 (".concat(s.totalRows.toLocaleString(),"행). 처리 시간이 길어질 수 있습니다."));let n=Object.keys(e[0]);if(s.columnCount=n.length,s.variables=n,s.columnCount>t.MAX_COLS)return s.isValid=!1,s.errors.push("변수가 너무 많습니다. 최대 ".concat(t.MAX_COLS,"개까지 처리 가능합니다.")),s;let a=[],r=[];return n.forEach(n=>{let t=e.map(e=>e[n]).filter(e=>null!=e&&""!==e),i=e.length-t.length;s.missingValues+=i,i/e.length>.5&&s.warnings.push("'".concat(n,"' 변수의 결측값이 50% 이상입니다.")),t.length>0&&t.every(e=>!isNaN(Number(e)))?a.push(n):r.push(n)}),a.length>0&&0===r.length?s.dataType="수치형":r.length>0&&0===a.length?s.dataType="범주형":s.dataType="혼합형",0===a.length&&s.warnings.push("수치형 변수가 없습니다. 일부 통계 분석이 제한될 수 있습니다."),s.totalRows<3&&(s.errors.push("최소 3개 이상의 데이터가 필요합니다."),s.isValid=!1),s}static getDataInfo(e){if(!e||0===e.length)return null;let s=Object.keys(e[0]),n=s.filter(s=>{let n=e.map(e=>e[s]).filter(e=>null!=e&&""!==e);return n.length>0&&n.every(e=>!isNaN(Number(e)))}),t=s.filter(s=>{let n=e.map(e=>e[s]).filter(e=>null!=e&&""!==e);return n.length>0&&!n.every(e=>!isNaN(Number(e)))});return{columnCount:s.length,rowCount:e.length,hasNumeric:n.length>0,hasCategorical:t.length>0,numericColumns:n,categoricalColumns:t}}static analyzeColumn(e,s){if(!e||0===e.length)throw Error("데이터가 비어있습니다");if(!(s in e[0]))throw Error("'".concat(s,"' 컬럼을 찾을 수 없습니다"));let n=e.map(e=>e[s]),t=n.filter(e=>null!=e&&""!==e),a={name:s,type:"mixed",numericCount:0,textCount:0,missingCount:n.length-t.length,uniqueValues:new Set(t).size},r=[],i=[];if(t.forEach(e=>{let s=Number(e);isNaN(s)?(i.push(String(e)),a.textCount++):(r.push(s),a.numericCount++)}),a.numericCount>0&&0===a.textCount?a.type="numeric":a.textCount>0&&0===a.numericCount?a.type="categorical":a.type="mixed",r.length>0){let e=[...r].sort((e,s)=>e-s),s=e.length;a.mean=r.reduce((e,s)=>e+s,0)/s,a.median=s%2==0?(e[s/2-1]+e[s/2])/2:e[Math.floor(s/2)],a.min=e[0],a.max=e[s-1],a.q1=e[Math.floor(.25*s)],a.q3=e[Math.floor(.75*s)];let n=r.map(e=>Math.pow(e-a.mean,2));a.std=Math.sqrt(n.reduce((e,s)=>e+s,0)/s);let t=a.q3-a.q1,i=a.q1-1.5*t,l=a.q3+1.5*t;a.outliers=r.filter(e=>e<i||e>l)}if(i.length>0||a.uniqueValues<=20){let e=new Map;t.forEach(s=>{let n=String(s);e.set(n,(e.get(n)||0)+1)}),a.topCategories=Array.from(e.entries()).map(e=>{let[s,n]=e;return{value:s,count:n}}).sort((e,s)=>s.count-e.count).slice(0,10)}return a}static performDetailedValidation(e){let s=this.performValidation(e);if(!s.isValid||!e||0===e.length)return s;let n=Object.keys(e[0]).map(s=>this.analyzeColumn(e,s));return n.forEach(e=>{if("mixed"===e.type&&s.warnings.push("'".concat(e.name,"' 변수에 숫자(").concat(e.numericCount,"개)와 문자(").concat(e.textCount,"개)가 혼재되어 있습니다.")),e.outliers&&e.outliers.length>0){let n=(e.outliers.length/e.numericCount*100).toFixed(1);s.warnings.push("'".concat(e.name,"' 변수에 ").concat(e.outliers.length,"개(").concat(n,"%)의 이상치가 발견되었습니다."))}}),{...s,columnStats:n}}static recommendAnalysisMethods(e,s){let n=this.getDataInfo(e);if(!n)return[];let t=[],a=Object.keys(e[0]).map(s=>this.analyzeColumn(e,s));if(1===n.numericColumns.length&&(t.push("일표본 t-검정: 평균값을 특정 값과 비교"),t.push("정규성 검정: 데이터의 정규분포 여부 확인"),t.push("기술통계: 평균, 중앙값, 표준편차 등 기본 통계량")),2===n.numericColumns.length&&(t.push("상관분석: 두 변수 간의 선형관계 분석"),t.push("단순선형회귀: 한 변수로 다른 변수 예측"),t.push("대응표본 t-검정: 짝지은 데이터 비교")),n.numericColumns.length>2&&(t.push("다중회귀분석: 여러 변수로 결과 예측"),t.push("주성분분석(PCA): 차원 축소 및 패턴 발견"),t.push("상관행렬: 모든 변수 간 상관관계 파악")),n.hasCategorical&&n.hasNumeric){let e=a.filter(e=>"categorical"===e.type).reduce((e,s)=>Math.max(e,s.uniqueValues),0);2===e?t.push("독립표본 t-검정: 두 그룹 평균 비교"):e>2&&(t.push("일원분산분석(ANOVA): 3개 이상 그룹 비교"),t.push("사후검정: 그룹 간 구체적 차이 확인"))}return n.categoricalColumns.length>0&&0===n.numericColumns.length&&(t.push("카이제곱 검정: 범주 간 독립성 검정"),t.push("빈도분석: 범주별 분포 확인"),t.push("교차표: 범주 변수 간 관계 분석")),a.some(e=>e.outliers&&e.outliers.length>0)&&(t.push("비모수 검정: 정규성 가정이 필요없는 분석"),t.push("Mann-Whitney U: 이상치에 강건한 그룹 비교"),t.push("Kruskal-Wallis: 비모수적 다중 그룹 비교")),t}}},90235:(e,s,n)=>{"use strict";n.d(s,{J:()=>i});var t=n(95155);n(12115);var a=n(10489),r=n(25016);function i(e){let{className:s,...n}=e;return(0,t.jsx)(a.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...n})}},90923:(e,s,n)=>{"use strict";n.d(s,{Xi:()=>d,av:()=>o,j7:()=>l,tU:()=>i});var t=n(95155);n(12115);var a=n(25667),r=n(25016);function i(e){let{className:s,...n}=e;return(0,t.jsx)(a.bL,{"data-slot":"tabs",className:(0,r.cn)("flex flex-col gap-2",s),...n})}function l(e){let{className:s,...n}=e;return(0,t.jsx)(a.B8,{"data-slot":"tabs-list",className:(0,r.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...n})}function d(e){let{className:s,...n}=e;return(0,t.jsx)(a.l9,{"data-slot":"tabs-trigger",className:(0,r.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n})}function o(e){let{className:s,...n}=e;return(0,t.jsx)(a.UC,{"data-slot":"tabs-content",className:(0,r.cn)("flex-1 outline-none",s),...n})}},91240:(e,s,n)=>{"use strict";n.d(s,{DM:()=>a,E3:()=>t});let t=(e,s,n)=>(n,t)=>{if(!e)return;let a=((e,s)=>{if(!Array.isArray(s)||0===s.length)return{data:[],fileName:e.name,columns:[]};let n=s[0],t=n&&"object"==typeof n&&null!==n?Object.keys(n):[];return{data:s,fileName:e.name,columns:t}})(n,t);0!==a.data.length&&(e(a),s(a))},a=(e,s,n)=>n=>{n&&"object"==typeof n&&e&&(e(n),s(n))}},93284:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>w});var t=n(95155),a=n(12115),r=n(83209),i=n(97003),l=n(32559),d=n(90923),o=n(67812),c=n(90235),m=n(17982),u=n(33789),p=n(52056),x=n(23327),h=n(1524),f=n(50906),j=n(42529),g=n(41944),_=n(84594),b=n(39253),y=n(33565),v=n(91240);let N={logistic4:{name:"4-매개변수 로지스틱",description:"고전적인 S자형 용량-반응 곡선 (4PL)",equation:"y = D + (A-D)/(1+(x/C)^B)",parameters:["A (최대값)","B (힐 기울기)","C (EC50)","D (최소값)"],applications:"대부분의 용량-반응 실험"},logistic3:{name:"3-매개변수 로지스틱",description:"최소값이 0으로 고정된 로지스틱 모델 (3PL)",equation:"y = A/(1+(x/C)^B)",parameters:["A (최대값)","B (힐 기울기)","C (EC50)"],applications:"최소값이 0인 억제/활성화 실험"},weibull:{name:"Weibull 모델",description:"비대칭 S자형 곡선 모델",equation:"y = D + (A-D) * exp(-exp(B*(log(x)-log(C))))",parameters:["A (최대값)","B (기울기)","C (변곡점)","D (최소값)"],applications:"독성학, 생존 분석"},gompertz:{name:"Gompertz 모델",description:"성장 곡선 모델",equation:"y = A * exp(-exp(B*(C-x)))",parameters:["A (최대값)","B (성장률)","C (변곡점)"],applications:"세포 성장, 종양 성장"},biphasic:{name:"Biphasic 모델",description:"이중 용량-반응 곡선",equation:"y = D + (A1-D)/(1+(x/C1)^B1) + (A2-D)/(1+(x/C2)^B2)",parameters:["A1, A2 (최대값들)","B1, B2 (기울기들)","C1, C2 (EC50들)","D (최소값)"],applications:"복합 수용체, 다중 작용점"}},C=e=>{let{selectedModel:s,uploadedData:n}=e,[m,h]=(0,a.useState)(null),[f,j]=(0,a.useState)(!1),[g,_]=(0,a.useState)(null),[b,v]=(0,a.useState)(!1),[N,C]=(0,a.useState)(""),[w,E]=(0,a.useState)(""),[R,A]=(0,a.useState)(""),[S,q]=(0,a.useState)(""),I=(0,a.useCallback)(async()=>{if(!n)return void _("데이터를 먼저 업로드해주세요.");if(!R)return void _("용량(농도) 변수를 선택해주세요.");if(!S)return void _("반응 변수를 선택해주세요.");j(!0),_(null);try{let e=n.data.map(e=>e[R]),t=n.data.map(e=>e[S]),a="\nimport numpy as np\nimport scipy.optimize as opt\nfrom scipy import stats\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# 데이터 준비\ndose_data = ".concat(JSON.stringify(e),"\nresponse_data = ").concat(JSON.stringify(t),'\n\n# 결측값 제거\ndose_array = np.array([x for x in dose_data if x is not None and not np.isnan(x)])\nresponse_array = np.array([x for x in response_data if x is not None and not np.isnan(x)])\n\nif len(dose_array) != len(response_array):\n    min_len = min(len(dose_array), len(response_array))\n    dose_array = dose_array[:min_len]\n    response_array = response_array[:min_len]\n\nif len(dose_array) < 5:\n    raise ValueError("용량-반응 분석에는 최소 5개의 데이터 포인트가 필요합니다.")\n\n# 용량 데이터 로그 변환 (0 값 처리)\nlog_dose = np.log10(dose_array + np.min(dose_array[dose_array > 0]) / 1000)\n\nmodel_type = "').concat(s,"\"\n\ndef logistic4_model(x, a, b, c, d):\n    return d + (a - d) / (1 + (x / c) ** b)\n\ndef logistic3_model(x, a, b, c):\n    return a / (1 + (x / c) ** b)\n\ndef weibull_model(x, a, b, c, d):\n    return d + (a - d) * np.exp(-np.exp(b * (np.log(x) - np.log(c))))\n\ndef gompertz_model(x, a, b, c):\n    return a * np.exp(-np.exp(b * (c - x)))\n\ndef biphasic_model(x, a1, b1, c1, a2, b2, c2, d):\n    return d + (a1 - d) / (1 + (x / c1) ** b1) + (a2 - d) / (1 + (x / c2) ** b2)\n\n# 모델 선택 및 초기 추정값\ny_max = np.max(response_array)\ny_min = np.min(response_array)\nx_mid = np.median(dose_array)\n\ntry:\n    if model_type == \"logistic4\":\n        model_func = logistic4_model\n        initial_guess = [y_max, 1.0, x_mid, y_min]\n        bounds = ([0, 0.1, np.min(dose_array), 0],\n                 [2*y_max, 10, np.max(dose_array), y_max])\n        param_names = ['top', 'hill_slope', 'ec50', 'bottom']\n\n    elif model_type == \"logistic3\":\n        model_func = logistic3_model\n        initial_guess = [y_max, 1.0, x_mid]\n        bounds = ([0, 0.1, np.min(dose_array)],\n                 [2*y_max, 10, np.max(dose_array)])\n        param_names = ['top', 'hill_slope', 'ec50']\n\n    elif model_type == \"weibull\":\n        model_func = weibull_model\n        initial_guess = [y_max, 1.0, x_mid, y_min]\n        bounds = ([0, 0.1, np.min(dose_array), 0],\n                 [2*y_max, 5, np.max(dose_array), y_max])\n        param_names = ['top', 'slope', 'inflection', 'bottom']\n\n    elif model_type == \"gompertz\":\n        model_func = gompertz_model\n        initial_guess = [y_max, 1.0, x_mid]\n        bounds = ([0, 0.1, np.min(dose_array)],\n                 [2*y_max, 5, np.max(dose_array)])\n        param_names = ['asymptote', 'growth_rate', 'inflection']\n\n    else:  # biphasic\n        model_func = biphasic_model\n        initial_guess = [y_max*0.6, 1.0, x_mid*0.5, y_max*0.4, 1.0, x_mid*2, y_min]\n        bounds = ([0, 0.1, np.min(dose_array), 0, 0.1, np.min(dose_array), 0],\n                 [y_max, 10, np.max(dose_array), y_max, 10, np.max(dose_array), y_max])\n        param_names = ['top1', 'hill1', 'ec50_1', 'top2', 'hill2', 'ec50_2', 'bottom']\n\n    # 제약 조건 적용\n    constraints_enabled = ").concat(b,"\n    if constraints_enabled:\n        bottom_constraint = ").concat(N?parseFloat(N):"None","\n        top_constraint = ").concat(w?parseFloat(w):"None","\n\n        if bottom_constraint is not None and len(bounds[0]) > 3:\n            bounds[0][3] = bottom_constraint  # bottom 최소값\n            bounds[1][3] = bottom_constraint  # bottom 최대값\n        if top_constraint is not None:\n            bounds[0][0] = top_constraint    # top 최소값\n            bounds[1][0] = top_constraint    # top 최대값\n\n    # 모델 피팅\n    popt, pcov = opt.curve_fit(model_func, dose_array, response_array,\n                               p0=initial_guess, bounds=bounds, maxfev=5000)\n\n    # 예측값 및 잔차\n    fitted_values = model_func(dose_array, *popt)\n    residuals = response_array - fitted_values\n\n    # 통계량 계산\n    ss_res = np.sum(residuals ** 2)\n    ss_tot = np.sum((response_array - np.mean(response_array)) ** 2)\n    r_squared = 1 - (ss_res / ss_tot)\n\n    n = len(response_array)\n    k = len(popt)\n    aic = n * np.log(ss_res / n) + 2 * k\n    bic = n * np.log(ss_res / n) + k * np.log(n)\n\n    # 신뢰구간\n    param_errors = np.sqrt(np.diag(pcov))\n    confidence_intervals = {}\n    for i, name in enumerate(param_names):\n        ci_lower = popt[i] - 1.96 * param_errors[i]\n        ci_upper = popt[i] + 1.96 * param_errors[i]\n        confidence_intervals[name] = [float(ci_lower), float(ci_upper)]\n\n    # 적합도 검정 (카이제곱)\n    expected = fitted_values\n    observed = response_array\n    chi_square = np.sum((observed - expected) ** 2 / (expected + 1e-10))\n    df = n - k\n    p_value = 1 - stats.chi2.cdf(chi_square, df) if df > 0 else 1.0\n\n    # 매개변수 딕셔너리\n    parameters = {}\n    for i, name in enumerate(param_names):\n        parameters[name] = float(popt[i])\n\n    # 특별한 매개변수들 (EC50, IC50 등)\n    special_params = {}\n    if 'ec50' in parameters:\n        special_params['ec50'] = parameters['ec50']\n        special_params['ed50'] = parameters['ec50']\n    if 'hill_slope' in parameters:\n        special_params['hill_slope'] = parameters['hill_slope']\n    if 'top' in parameters:\n        special_params['top'] = parameters['top']\n    if 'bottom' in parameters:\n        special_params['bottom'] = parameters['bottom']\n\n    # IC50 계산 (억제 곡선인 경우)\n    if 'top' in parameters and 'bottom' in parameters and 'ec50' in parameters:\n        ic50_response = (parameters['top'] + parameters['bottom']) / 2\n        special_params['ic50'] = parameters['ec50']  # 간단한 근사\n\nexcept Exception as e:\n    raise ValueError(f\"모델 피팅 실패: {str(e)}\")\n\n{\n    'model': model_type,\n    'parameters': parameters,\n    'fitted_values': fitted_values.tolist(),\n    'residuals': residuals.tolist(),\n    'r_squared': float(r_squared),\n    'aic': float(aic),\n    'bic': float(bic),\n    **special_params,\n    'confidence_intervals': confidence_intervals,\n    'goodness_of_fit': {\n        'chi_square': float(chi_square),\n        'p_value': float(p_value),\n        'degrees_freedom': int(df)\n    }\n}\n"),r=(await (0,y.Yo)(["scipy","numpy"])).runPython(a).toJs({dict_converter:Object.fromEntries});h(r)}catch(e){_(e instanceof Error?e.message:"분석 중 오류가 발생했습니다.")}finally{j(!1)}},[n,R,S,s,b,N,w]),L=e=>e>=.95?{label:"매우 우수",color:"bg-muted text-muted-foreground border"}:e>=.9?{label:"우수",color:"bg-muted text-muted-foreground border"}:e>=.8?{label:"양호",color:"bg-muted text-muted-foreground border"}:{label:"개선 필요",color:"bg-muted text-muted-foreground border"};return(0,t.jsxs)("div",{className:"space-y-6",children:[n?(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"변수 선택"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"dose-column",children:"용량/농도 변수"}),(0,t.jsxs)("select",{id:"dose-column",value:R,onChange:e=>A(e.target.value),className:"w-full mt-1 p-2 border rounded-md",children:[(0,t.jsx)("option",{value:"",children:"선택하세요"}),n.columns.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"독립변수: 용량, 농도, 시간 등"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"response-column",children:"반응 변수"}),(0,t.jsxs)("select",{id:"response-column",value:S,onChange:e=>q(e.target.value),className:"w-full mt-1 p-2 border rounded-md",children:[(0,t.jsx)("option",{value:"",children:"선택하세요"}),n.columns.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"종속변수: 생물학적 반응, 억제율, 활성도 등"})]}),(0,t.jsx)(i.$,{onClick:I,disabled:f||!R||!S,className:"w-full",children:f?"분석 중...":"분석 실행"})]})]}):(0,t.jsxs)(l.Fc,{children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsx)(l.TN,{children:"변수를 선택하려면 먼저 데이터를 업로드해주세요."})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"모델 제약조건 (선택사항)"})}),(0,t.jsx)(r.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"enable-constraints",checked:b,onChange:e=>v(e.target.checked),className:"rounded"}),(0,t.jsx)(c.J,{htmlFor:"enable-constraints",children:"매개변수 제약조건 사용"})]}),b&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"bottom-constraint",children:"최소값 고정"}),(0,t.jsx)(u.p,{id:"bottom-constraint",type:"number",placeholder:"예: 0",value:N,onChange:e=>C(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{htmlFor:"top-constraint",children:"최대값 고정"}),(0,t.jsx)(u.p,{id:"top-constraint",type:"number",placeholder:"예: 100",value:w,onChange:e=>E(e.target.value)})]})]})]})})]}),g&&(0,t.jsxs)(l.Fc,{variant:"destructive",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsx)(l.XL,{children:"분석 오류"}),(0,t.jsx)(l.TN,{children:g})]}),m&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{className:"pb-2",children:(0,t.jsx)(r.ZB,{className:"text-sm font-medium text-muted-foreground",children:"모델 적합도"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:["R\xb2 = ",m.r_squared.toFixed(4)]}),(0,t.jsx)(o.E,{className:L(m.r_squared).color,children:L(m.r_squared).label})]})]}),m.ec50&&(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{className:"pb-2",children:(0,t.jsx)(r.ZB,{className:"text-sm font-medium text-muted-foreground",children:"EC50/ED50"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:m.ec50.toFixed(4)}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"50% 효과 농도"})]})]}),m.hill_slope&&(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{className:"pb-2",children:(0,t.jsx)(r.ZB,{className:"text-sm font-medium text-muted-foreground",children:"Hill 기울기"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:m.hill_slope.toFixed(4)}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"곡선의 가파른 정도"})]})]})]}),(0,t.jsxs)(d.tU,{defaultValue:"parameters",className:"space-y-4",children:[(0,t.jsxs)(d.j7,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(d.Xi,{value:"parameters",children:"매개변수"}),(0,t.jsx)(d.Xi,{value:"statistics",children:"통계량"}),(0,t.jsx)(d.Xi,{value:"interpretation",children:"해석"}),(0,t.jsx)(d.Xi,{value:"diagnostics",children:"진단"})]}),(0,t.jsx)(d.av,{value:"parameters",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"모델 매개변수"})}),(0,t.jsx)(r.Wu,{children:(0,t.jsx)("div",{className:"space-y-4",children:Object.entries(m.parameters).map(e=>{let[s,n]=e;return(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:s}),m.confidence_intervals[s]&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["95% CI: [",m.confidence_intervals[s][0].toFixed(4),", ",m.confidence_intervals[s][1].toFixed(4),"]"]})]}),(0,t.jsx)("span",{className:"font-mono text-lg",children:n.toFixed(6)})]},s)})})})]})}),(0,t.jsx)(d.av,{value:"statistics",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"통계 지표"})}),(0,t.jsx)(r.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"R-squared"}),(0,t.jsx)("span",{className:"font-mono",children:m.r_squared.toFixed(6)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"AIC"}),(0,t.jsx)("span",{className:"font-mono",children:m.aic.toFixed(2)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"BIC"}),(0,t.jsx)("span",{className:"font-mono",children:m.bic.toFixed(2)})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"χ\xb2 통계량"}),(0,t.jsx)("span",{className:"font-mono",children:m.goodness_of_fit.chi_square.toFixed(4)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"p-value"}),(0,t.jsx)("span",{className:"font-mono",children:m.goodness_of_fit.p_value.toFixed(4)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"자유도"}),(0,t.jsx)("span",{className:"font-mono",children:m.goodness_of_fit.degrees_freedom})]})]})]})})]})}),(0,t.jsx)(d.av,{value:"interpretation",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"결과 해석"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-semibold",children:"모델 적합도"}),(0,t.jsx)("div",{className:"bg-muted/50 p-4 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm",children:["R\xb2 = ",m.r_squared.toFixed(4)," - ",L(m.r_squared).label,"한 적합도를 보입니다.",m.r_squared>=.95&&" 매우 정확한 예측이 가능합니다.",m.r_squared>=.9&&m.r_squared<.95&&" 신뢰할 만한 예측이 가능합니다.",m.r_squared>=.8&&m.r_squared<.9&&" 적절한 예측 성능을 보입니다.",m.r_squared<.8&&" 모델 개선이나 다른 모델 검토가 필요할 수 있습니다."]})})]}),m.ec50&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-semibold",children:"핵심 매개변수"}),(0,t.jsx)("div",{className:"bg-muted/50 p-4 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsxs)("strong",{children:["EC50 = ",m.ec50.toFixed(4)]}),": 50% 효과를 나타내는 농도입니다.",m.hill_slope&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("br",{}),(0,t.jsxs)("strong",{children:["Hill 기울기 = ",m.hill_slope.toFixed(4)]}),":",m.hill_slope>1?" 가파른 S자 곡선":m.hill_slope<1?" 완만한 S자 곡선":" 표준적인 S자 곡선","을 나타냅니다."]})]})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"font-semibold",children:"적합도 검정"}),(0,t.jsx)("div",{className:"bg-muted/50 p-4 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm",children:["카이제곱 검정: χ\xb2 = ",m.goodness_of_fit.chi_square.toFixed(4),", p-value = ",m.goodness_of_fit.p_value.toFixed(4),m.goodness_of_fit.p_value>.05?" - 모델이 데이터에 적절히 적합됩니다.":" - 모델 적합도에 문제가 있을 수 있습니다."]})})]})]})]})}),(0,t.jsx)(d.av,{value:"diagnostics",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"모델 진단"})}),(0,t.jsx)(r.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(l.Fc,{children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),(0,t.jsx)(l.XL,{children:"잔차 분석 권장"}),(0,t.jsx)(l.TN,{children:"잔차의 정규성과 등분산성을 확인하여 모델의 가정을 검토하세요. 극단적인 이상치가 있다면 데이터 전처리를 고려하세요."})]}),(0,t.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"모델 선택 지침"}),(0,t.jsxs)("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[(0,t.jsx)("li",{children:"• AIC/BIC가 낮을수록 더 좋은 모델"}),(0,t.jsx)("li",{children:"• R\xb2이 높을수록 설명력이 좋음"}),(0,t.jsx)("li",{children:"• 잔차가 무작위로 분포해야 함"}),(0,t.jsx)("li",{children:"• 생물학적 의미가 타당해야 함"})]})]})]})})]})})]})]})]})};function w(){let{state:e,actions:s}=(0,b.Q)({withUploadedData:!0,withError:!0}),{currentStep:n,uploadedData:d,error:o}=e,[u,p]=(0,a.useState)("logistic4"),y=(0,v.E3)(s.setUploadedData,e=>{s.setCurrentStep(2),s.setError&&s.setError("")},"dose-response");return(0,t.jsxs)(g.x,{title:"용량-반응 분석",description:"용량과 생물학적 반응 간의 관계를 수학적 모델로 분석하여 EC50, IC50 등 핵심 매개변수를 추정합니다",children:[0===n&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"방법론 이해"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"용량-반응 분석은 약물, 독소, 또는 기타 화학물질의 용량과 생물학적 반응 간의 관계를 정량적으로 분석하는 방법입니다."}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(g.J,{icon:(0,t.jsx)(h.A,{className:"w-5 h-5"}),title:"언제 사용하나요?",children:(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,t.jsx)("li",{children:"• 약물의 효력 및 독성 평가"}),(0,t.jsx)("li",{children:"• EC50, IC50, ED50 값 결정"}),(0,t.jsx)("li",{children:"• 용량-반응 곡선 모델링"}),(0,t.jsx)("li",{children:"• 생물학적 활성 비교 연구"})]})}),(0,t.jsx)(g.J,{icon:(0,t.jsx)(f.A,{className:"w-5 h-5"}),title:"주요 특징",children:(0,t.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,t.jsx)("li",{children:"• S자형(시그모이드) 곡선 분석"}),(0,t.jsx)("li",{children:"• 다양한 수학적 모델 지원"}),(0,t.jsx)("li",{children:"• 신뢰구간 및 통계 검정"}),(0,t.jsx)("li",{children:"• 매개변수 제약조건 설정 가능"})]})})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"모델 선택"})}),(0,t.jsx)(r.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.J,{className:"text-base font-medium",children:"용량-반응 모델"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"데이터의 특성과 연구 목적에 따라 적절한 모델을 선택하세요."})]}),(0,t.jsx)(m.z,{value:u,onValueChange:p,className:"space-y-3",children:Object.entries(N).map(e=>{let[s,n]=e;return(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-3 border rounded-lg",children:[(0,t.jsx)(m.C,{value:s,id:s,className:"mt-1"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(c.J,{htmlFor:s,className:"font-medium cursor-pointer",children:n.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:n.description}),(0,t.jsx)("p",{className:"text-xs font-mono bg-muted/50 p-1 rounded",children:n.equation}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["매개변수: ",n.parameters.join(", ")]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["적용: ",n.applications]})]})]},s)})})]})})]})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(i.$,{onClick:()=>s.setCurrentStep(1),children:["다음 단계",(0,t.jsx)(j.A,{className:"ml-2 h-4 w-4"})]})})]}),1===n&&(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"데이터 업로드"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"용량(농도) 데이터와 해당하는 생물학적 반응 데이터를 업로드하세요."}),(0,t.jsx)(_.DataUploadStep,{onUploadComplete:y,onNext:()=>s.setCurrentStep(2)})]})]})}),2===n&&(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"변수 선택 및 분석"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"용량 변수와 반응 변수를 선택하고 선택한 모델로 분석을 실행합니다."}),(0,t.jsx)(C,{selectedModel:u,uploadedData:d||null})]})]})}),3===n&&(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"결과 해석"})}),(0,t.jsxs)(r.Wu,{children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"용량-반응 분석 결과를 해석하고 EC50, IC50 등 핵심 매개변수의 의미를 이해합니다."}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(l.Fc,{children:[(0,t.jsx)(x.A,{className:"h-4 w-4"}),(0,t.jsx)(l.XL,{children:"결과 해석 가이드"}),(0,t.jsxs)(l.TN,{className:"space-y-2",children:[(0,t.jsxs)("div",{children:["• ",(0,t.jsx)("strong",{children:"EC50/IC50"}),": 50% 효과를 나타내는 농도 (효력 지표)"]}),(0,t.jsxs)("div",{children:["• ",(0,t.jsx)("strong",{children:"Hill 기울기"}),": 곡선의 가파른 정도 (협력성 지표)"]}),(0,t.jsxs)("div",{children:["• ",(0,t.jsx)("strong",{children:"R\xb2"}),": 모델의 설명력 (0.9 이상 권장)"]}),(0,t.jsxs)("div",{children:["• ",(0,t.jsx)("strong",{children:"AIC/BIC"}),": 모델 선택 지표 (낮을수록 좋음)"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{className:"text-base",children:"주요 매개변수"})}),(0,t.jsx)(r.Wu,{className:"text-sm",children:(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Top"}),": 최대 반응값"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Bottom"}),": 최소 반응값 (기저선)"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"EC50"}),": 50% 효과 농도"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Hill 기울기"}),": 곡선 기울기"]})]})})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{className:"text-base",children:"모델 평가"})}),(0,t.jsx)(r.Wu,{className:"text-sm",children:(0,t.jsxs)("ul",{className:"space-y-1",children:[(0,t.jsx)("li",{children:"• R\xb2 ≥ 0.95: 매우 우수"}),(0,t.jsx)("li",{children:"• R\xb2 ≥ 0.90: 우수"}),(0,t.jsx)("li",{children:"• R\xb2 ≥ 0.80: 양호"}),(0,t.jsx)("li",{children:"• R\xb2 < 0.80: 개선 필요"})]})})]})]})]})]})]})})]})}}},e=>{e.O(0,[3524,4909,4120,660,6093,1204,5077,8720,2320,1286,9333,6724,6257,8441,1255,7358],()=>e(e.s=17607)),_N_E=e.O()}]);