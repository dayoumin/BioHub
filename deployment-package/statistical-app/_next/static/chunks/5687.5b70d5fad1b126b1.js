"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5687],{15687:(e,a,t)=>{t.r(a),t.d(a,{PurposeInputStep:()=>w});var i=t(95155),n=t(12115),s=t(5917),r=t(6132),l=t(90923),o=t(32559),c=t(67812);function d(e){let{methods:a,selectedMethod:t,dataProfile:n,onMethodSelect:r,checkMethodRequirements:l}=e;return(0,i.jsx)("div",{className:"grid gap-2",children:a.map(e=>{let a=n?l(e,n):{canUse:!0,warnings:[]};return(0,i.jsx)("button",{onClick:()=>r(e),className:"text-left p-3 border rounded-lg hover:bg-accent transition-all ".concat((null==t?void 0:t.id)===e.id?"border-primary bg-primary/5":"border-border"," ").concat(a.canUse?"":"opacity-60"),children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"font-medium",children:e.name}),e.subcategory&&(0,i.jsx)(c.E,{variant:"secondary",className:"text-xs",children:e.subcategory}),!a.canUse&&(0,i.jsx)(c.E,{variant:"destructive",className:"text-xs",children:"요구사항 미충족"})]}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description}),a.warnings.length>0&&(0,i.jsx)("div",{className:"mt-2 text-xs text-orange-600 dark:text-orange-400",children:a.warnings.map((e,a)=>(0,i.jsxs)("div",{children:["⚠️ ",e]},a))})]}),(null==t?void 0:t.id)===e.id&&(0,i.jsx)(s.A,{className:"w-5 h-5 text-primary ml-2 flex-shrink-0"})]})},e.id)})})}var m=t(97003),u=t(97262);function p(e){let{mapping:a,onClose:t}=e,{setVariableMapping:n}=(0,u.y)();return(0,i.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-4 space-y-3",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("h4",{className:"font-medium text-sm",children:"\uD83C\uDFAF 변수 자동 매핑"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(m.$,{size:"sm",variant:"outline",onClick:()=>{n(a),t()},children:"변수 매핑 편집"}),(0,i.jsx)(m.$,{size:"sm",variant:"ghost",onClick:t,children:"숨기기"})]})]}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[a.dependentVar&&(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(c.E,{variant:"outline",children:"종속변수"}),(0,i.jsx)("span",{className:"font-mono",children:a.dependentVar})]}),a.independentVar&&(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(c.E,{variant:"outline",children:"독립변수"}),(0,i.jsx)("span",{className:"font-mono",children:Array.isArray(a.independentVar)?a.independentVar.join(", "):a.independentVar})]}),a.groupVar&&(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(c.E,{variant:"outline",children:"그룹변수"}),(0,i.jsx)("span",{className:"font-mono",children:a.groupVar})]}),a.timeVar&&(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(c.E,{variant:"outline",children:"시간변수"}),(0,i.jsx)("span",{className:"font-mono",children:a.timeVar})]}),a.variables&&a.variables.length>0&&(0,i.jsxs)("div",{className:"flex items-start gap-2",children:[(0,i.jsx)(c.E,{variant:"outline",children:"변수목록"}),(0,i.jsx)("span",{className:"font-mono flex-1",children:a.variables.join(", ")})]})]}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:"\uD83D\uDCA1 자동 매핑은 기본값입니다. “변수 매핑 편집”을 눌러 독립/종속/그룹 변수를 확정하세요."})]})}var g=t(95740);let h=[{id:"comparison",name:"차이/비교 분석",icon:"\uD83D\uDCCA",description:"두 개 이상 그룹 간 차이 검정",methods:["t-test","anova","nonparametric"]},{id:"relationship",name:"관계/예측 분석",icon:"\uD83D\uDCC8",description:"변수 간 관계 파악 및 예측",methods:["correlation","regression"]},{id:"frequency",name:"빈도/분포 분석",icon:"\uD83D\uDCCB",description:"범주형 자료 분석 및 적합도",methods:["chi-square","descriptive"]},{id:"advanced",name:"고급/특수 분석",icon:"\uD83D\uDD2C",description:"차원축소, 군집, 시계열 등",methods:["pca","clustering","timeseries","survival"]}],v=[{id:"descriptive-stats",name:"기술통계량",description:"평균, 중앙값, 표준편차 등 기본 통계",category:"descriptive",requirements:{minSampleSize:1,variableTypes:["numeric"]}},{id:"normality-test",name:"Shapiro-Wilk 정규성 검정",description:"데이터의 정규분포 여부 검정",category:"descriptive",requirements:{minSampleSize:3,variableTypes:["numeric"]}},{id:"homogeneity-test",name:"Levene 등분산성 검정",description:"그룹 간 분산의 동일성 검정",category:"descriptive",requirements:{minSampleSize:4,variableTypes:["numeric","categorical"]}},{id:"one-sample-t",name:"일표본 t-검정",description:"한 그룹의 평균이 특정값과 다른지 검정",category:"t-test",requirements:{minSampleSize:2,variableTypes:["numeric"],assumptions:["정규성"]}},{id:"two-sample-t",name:"독립표본 t-검정",description:"두 독립 그룹 간 평균 차이 검정",category:"t-test",requirements:{minSampleSize:4,variableTypes:["numeric","categorical"],assumptions:["정규성","등분산성"]}},{id:"paired-t",name:"대응표본 t-검정",description:"같은 대상의 전후 차이 검정",category:"t-test",requirements:{minSampleSize:2,variableTypes:["numeric"],assumptions:["정규성"]}},{id:"welch-t",name:"Welch's t-검정",description:"등분산 가정 없는 두 그룹 비교",category:"t-test",requirements:{minSampleSize:4,variableTypes:["numeric","categorical"],assumptions:["정규성"]}},{id:"one-way-anova",name:"일원분산분석",description:"3개 이상 그룹 간 평균 차이 검정",category:"anova",requirements:{minSampleSize:6,variableTypes:["numeric","categorical"],assumptions:["정규성","등분산성"]}},{id:"two-way-anova",name:"이원분산분석",description:"2개 요인의 효과 분석",category:"anova",requirements:{minSampleSize:8,variableTypes:["numeric","categorical"],assumptions:["정규성","등분산성"]}},{id:"tukey-hsd",name:"Tukey HSD",description:"ANOVA 후 다중비교",category:"anova",subcategory:"posthoc",requirements:{minSampleSize:6,variableTypes:["numeric","categorical"]}},{id:"bonferroni",name:"Bonferroni 보정",description:"다중비교 보정",category:"anova",subcategory:"posthoc",requirements:{minSampleSize:6,variableTypes:["numeric","categorical"]}},{id:"games-howell",name:"Games-Howell",description:"등분산 가정 없는 사후검정",category:"anova",subcategory:"posthoc",requirements:{minSampleSize:6,variableTypes:["numeric","categorical"]}},{id:"simple-regression",name:"단순선형회귀",description:"하나의 예측변수로 종속변수 예측",category:"regression",requirements:{minSampleSize:10,variableTypes:["numeric"],assumptions:["선형성","정규성","등분산성"]}},{id:"multiple-regression",name:"다중회귀분석",description:"여러 예측변수로 종속변수 예측",category:"regression",requirements:{minSampleSize:20,variableTypes:["numeric"],assumptions:["선형성","정규성","등분산성","다중공선성"]}},{id:"logistic-regression",name:"로지스틱 회귀",description:"이진 종속변수 예측",category:"regression",requirements:{minSampleSize:50,variableTypes:["numeric","categorical"]}},{id:"correlation",name:"상관분석",description:"Pearson/Spearman 상관계수",category:"correlation",requirements:{minSampleSize:3,variableTypes:["numeric"]}},{id:"mann-whitney",name:"Mann-Whitney U",description:"독립 두 그룹 비모수 검정",category:"nonparametric",requirements:{minSampleSize:4,variableTypes:["numeric","categorical"]}},{id:"wilcoxon",name:"Wilcoxon 부호순위",description:"대응표본 비모수 검정",category:"nonparametric",requirements:{minSampleSize:5,variableTypes:["numeric"]}},{id:"kruskal-wallis",name:"Kruskal-Wallis",description:"3개 이상 그룹 비모수 검정",category:"nonparametric",requirements:{minSampleSize:6,variableTypes:["numeric","categorical"]}},{id:"dunn-test",name:"Dunn 검정",description:"Kruskal-Wallis 사후검정",category:"nonparametric",subcategory:"posthoc",requirements:{minSampleSize:6,variableTypes:["numeric","categorical"]}},{id:"chi-square",name:"카이제곱 검정",description:"범주형 변수 독립성 검정",category:"chi-square",requirements:{minSampleSize:20,variableTypes:["categorical"]}},{id:"pca",name:"주성분분석",description:"차원 축소 및 변수 요약",category:"pca",requirements:{minSampleSize:30,variableTypes:["numeric"]}},{id:"k-means",name:"K-평균 군집",description:"데이터 그룹화",category:"clustering",requirements:{minSampleSize:30,variableTypes:["numeric"]}},{id:"hierarchical",name:"계층적 군집",description:"계층구조 군집 분석",category:"clustering",requirements:{minSampleSize:20,variableTypes:["numeric"]}},{id:"time-decomposition",name:"시계열 분해",description:"추세, 계절성, 잔차 분석",category:"timeseries",requirements:{minSampleSize:50,variableTypes:["numeric","date"]}},{id:"arima",name:"ARIMA 예측",description:"시계열 예측 모델",category:"timeseries",requirements:{minSampleSize:100,variableTypes:["numeric","date"]}},{id:"kaplan-meier",name:"Kaplan-Meier 생존분석",description:"생존 확률 추정",category:"survival",requirements:{minSampleSize:20,variableTypes:["numeric","categorical"]}}];function x(e,a){let t=[],i=!0;return e.requirements&&(e.requirements.minSampleSize&&a.totalRows<e.requirements.minSampleSize&&(t.push("최소 ".concat(e.requirements.minSampleSize,"개 데이터 필요 (현재: ").concat(a.totalRows,"개)")),i=!1),e.requirements.variableTypes&&(e.requirements.variableTypes.includes("numeric")&&0===a.numericVars&&(t.push("수치형 변수 필요"),i=!1),e.requirements.variableTypes.includes("categorical")&&0===a.categoricalVars&&(t.push("범주형 변수 필요"),i=!1)),e.requirements.assumptions&&e.requirements.assumptions.forEach(e=>{"정규성"!==e||a.normalityPassed||t.push("정규성 가정 위반 (비모수 검정 고려)"),"등분산성"!==e||a.homogeneityPassed||t.push("등분산성 가정 위반 (Welch 검정 고려)")})),{canUse:i,warnings:t}}function f(e){let{methods:a,selectedMethod:t,showRecommendations:n,onToggle:r,onMethodSelect:l,onQuestionTypeChange:o}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"flex gap-2",children:(0,i.jsxs)(m.$,{onClick:r,variant:"outline",className:"flex-1",children:[(0,i.jsx)(g.A,{className:"w-4 h-4 mr-2"}),"AI 추천 방법 ",n?"숨기기":"보기",a.length>0&&"(".concat(a.length,"개)")]})}),n&&a.length>0&&(0,i.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-4 space-y-2",children:[(0,i.jsx)("h4",{className:"font-medium text-sm mb-2",children:"\uD83E\uDD16 데이터 특성 기반 추천"}),a.map(e=>(0,i.jsx)("button",{onClick:()=>{l(e);let a=h.find(a=>a.methods.includes(e.category));a&&o(a.id)},className:"w-full text-left p-2 bg-white dark:bg-background rounded hover:shadow-sm transition-all ".concat((null==t?void 0:t.id)===e.id?"ring-2 ring-primary":""),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-sm",children:e.name}),(0,i.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:e.description}),["mannwhitney","kruskal-wallis","welchAnova","gamesHowell","permutation"].includes(e.id)&&(0,i.jsxs)("div",{className:"text-[11px] text-blue-600 mt-1",children:["mannwhitney"===e.id&&"정규성 위반 또는 소표본에서 평균 비교 대안","kruskal-wallis"===e.id&&"정규성 위반 다집단 평균 비교 대안","welchAnova"===e.id&&"이분산 환경에서 평균 비교(ANOVA) 대안","gamesHowell"===e.id&&"이분산 사후검정 (등분산 가정 불필요)","permutation"===e.id&&"표본 수가 작을 때 견고한 검정"]})]}),(null==t?void 0:t.id)===e.id&&(0,i.jsx)(s.A,{className:"w-4 h-4 text-primary"})]})},e.id))]})]})}var y=t(32949);class b{static recommend(e){let a={methods:[],confidence:"low",warnings:[],alternativeSuggestion:void 0},t=this.assessTextClarity(e.purposeText);t.score<.3&&(a.warnings.push("입력하신 분석 목적이 모호합니다. 더 구체적으로 작성해주세요."),a.alternativeSuggestion=this.suggestClarification(e),a.confidence="low");let i=this.detectContradictions(e);i.length>0&&a.warnings.push(...i);let n=this.checkDataPurposeCompatibility(e);n.isCompatible||(a.warnings.push(n.reason),a.confidence="low");let s=this.generateRecommendations(e);return a.methods=s.methods,a.confidence=this.calculateConfidence(t.score,i.length,n.score,s.matchScore),"low"===a.confidence&&(a.alternativeSuggestion=this.generateAlternative(e)),a}static assessTextClarity(e){let a=[],t=1;e.length<10&&(a.push("텍스트가 너무 짧습니다"),t-=.5);let i=["이거","그거","저거","뭔가","좀","대충","그냥"].filter(a=>e.includes(a));return i.length>0&&(a.push("모호한 표현 발견: ".concat(i.join(", "))),t-=.2*i.length),["차이","관계","영향","비교","변화","효과"].some(a=>e.includes(a))||(a.push("분석 목적이 불명확합니다"),t-=.3),{score:Math.max(0,t),issues:a}}static detectContradictions(e){let a=[],t=e.purposeText.toLowerCase();return(t.includes("두")||t.includes("비교"))&&0===e.dataShape.columnTypes.filter(e=>"categorical"===e).length&&a.push("그룹 비교를 원하시나 범주형 변수가 없습니다."),(t.includes("상관")||t.includes("관계"))&&e.dataShape.columnTypes.filter(e=>"numeric"===e).length<2&&a.push("상관분석에는 최소 2개의 수치형 변수가 필요합니다."),(t.includes("시간")||t.includes("추세")||t.includes("변화"))&&(e.dataShape.columnTypes.includes("datetime")||t.includes("전후")||a.push("시간 분석을 원하시나 날짜/시간 변수가 없습니다.")),a}static checkDataPurposeCompatibility(e){let{dataShape:a,dataQuality:t}=e;return a.rows<5?{isCompatible:!1,score:0,reason:"데이터가 너무 적습니다 (최소 5개 이상 필요)"}:t.missingRatio>.5?{isCompatible:!1,score:.3,reason:"결측값이 50% 이상입니다. 데이터 정제가 필요합니다."}:(e.purposeText.includes("t검정")||e.purposeText.includes("평균"))&&a.rows<30&&!t.isNormallyDistributed?{isCompatible:!0,score:.7,reason:"샘플이 작고 정규분포가 아닙니다. 비모수 검정을 고려하세요."}:{isCompatible:!0,score:1,reason:""}}static generateRecommendations(e){let a=[],t=0,i=e.dataShape.rows<30,n=!1===e.dataQuality.isNormallyDistributed,s=!1===e.dataQuality.isHomoscedastic;return(i||n)&&(a.unshift({id:"mannwhitney",name:"Mann-Whitney U",description:"정규성 가정 불필요",category:"nonparametric"}),t+=.2),s&&(a.unshift({id:"welchAnova",name:"Welch ANOVA",description:"등분산 가정 완화",category:"anova"}),a.unshift({id:"gamesHowell",name:"Games-Howell",description:"사후검정(이분산)",category:"anova"}),t+=.2),i&&(a.unshift({id:"permutation",name:"Permutation Test",description:"표본이 작을 때 견고",category:"advanced"}),t+=.1),{methods:a,matchScore:t}}static calculateConfidence(e,a,t,i){let n=Math.max(0,Math.min(1,.2*e+.3*t+.5*i-Math.min(.4,.15*a)));return n>.7?"high":n>.4?"medium":"low"}static suggestClarification(e){let a=[],t=e.dataShape.columnNames.filter((a,t)=>"numeric"===e.dataShape.columnTypes[t]),i=e.dataShape.columnNames.filter((a,t)=>"categorical"===e.dataShape.columnTypes[t]);return t.length>=2&&a.push('"'.concat(t[0],"와 ").concat(t[1],'의 관계를 알고 싶어요"')),i.length>0&&t.length>0&&a.push('"'.concat(i[0],"별 ").concat(t[0],' 차이를 비교하고 싶어요"')),0===a.length&&a.push("데이터의 전반적인 특성을 파악하고 싶어요"),"예시: ".concat(a.join(" 또는 "))}static generateAlternative(e){let a=[];return a.push("먼저 기술통계로 데이터를 탐색해보세요"),e.dataQuality.missingRatio>.2&&a.push("결측값 처리 후 분석을 진행하세요"),a.push("산점도나 박스플롯으로 데이터를 시각화해보세요"),a.join(". ")}}function w(e){var a;let{onPurposeSubmit:t,validationResults:c,data:m,onNext:g,onPrevious:w,canGoNext:j,canGoPrevious:S}=e,[N,k]=(0,n.useState)(""),[V,q]=(0,n.useState)(null),[T,z]=(0,n.useState)(null),[C,M]=(0,n.useState)(!1),[A,D]=(0,n.useState)(null),[E,R]=(0,n.useState)(!1),{assumptionResults:F,dataCharacteristics:P,setSelectedMethod:U,setVariableMapping:W}=(0,u.y)(),_=(0,n.useMemo)(()=>{var e,a,t,i,n,s,r;if(!c||!m)return null;let l=(null==(e=c.columns)?void 0:e.filter(e=>"numeric"===e.type).length)||0,o=(null==(a=c.columns)?void 0:a.filter(e=>"categorical"===e.type).length)||0,d=(null==(t=c.columns)?void 0:t.some(e=>"date"===e.type))||!1,u=(null==(n=c.columns)||null==(i=n.find(e=>"categorical"===e.type))?void 0:i.uniqueValues)||0;return{numericVars:l,categoricalVars:o,totalRows:m.length,hasTimeVar:d,hasGroupVar:o>0,groupLevels:u,normalityPassed:(null==(s=c.normalityTest)?void 0:s.isNormal)||!1,homogeneityPassed:(null==(r=c.homogeneityTest)?void 0:r.equalVariance)||!1}},[c,m]),H=(0,n.useMemo)(()=>{if(!_)return[];let e=[];if(e.push(v.find(e=>"descriptive-stats"===e.id)),_.numericVars>=2&&e.push(v.find(e=>"correlation"===e.id)),_.hasGroupVar&&_.numericVars>=1&&(2===_.groupLevels?(e.push(v.find(e=>"two-sample-t"===e.id)),e.push(v.find(e=>"mann-whitney"===e.id))):(_.groupLevels||0)>=3&&(e.push(v.find(e=>"one-way-anova"===e.id)),e.push(v.find(e=>"kruskal-wallis"===e.id)))),_.categoricalVars>=2&&_.numericVars>=1){let a=v.find(e=>"two-way-anova"===e.id);a&&e.push(a)}return _.hasTimeVar&&_.totalRows>=50&&e.push(v.find(e=>"time-decomposition"===e.id)),_.totalRows>=30&&_.numericVars>=3&&e.push(v.find(e=>"pca"===e.id)),e.filter(Boolean)},[_]),[L,Q]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!c||!m)return;let e=setTimeout(()=>{try{var e,a,t,i,n,s,r,l,o,d;let u=c.columns||[],p=u.map(e=>"date"===e.type?"datetime":e.type),g=u.map(e=>e.name),h=(()=>{let e=(c.totalRows||0)*(c.columnCount||0);return e?Math.max(0,Math.min(1,(c.missingValues||0)/e)):0})(),v=(()=>{let e=(c.columnStats||[]).reduce((e,a)=>{var t;return e+((null==(t=a.outliers)?void 0:t.length)||0)},0),a=c.totalRows||0;return a?Math.max(0,Math.min(1,e/a)):0})(),x=(null==F||null==(a=F.normality)||null==(e=a.shapiroWilk)?void 0:e.isNormal)===!0||(null==F||null==(i=F.normality)||null==(t=i.kolmogorovSmirnov)?void 0:t.isNormal)===!0,f=null!=(d=null!=(o=null==F||null==(s=F.homogeneity)||null==(n=s.levene)?void 0:n.equalVariance)?o:null==F||null==(l=F.homogeneity)||null==(r=l.bartlett)?void 0:r.equalVariance)?d:void 0,y={purposeText:N||"",dataShape:{rows:m.length,columns:c.columnCount||u.length||0,columnTypes:p,columnNames:g},dataQuality:{missingRatio:h,outlierRatio:v,isNormallyDistributed:x,isHomoscedastic:f}},w=b.recommend(y);Q(w.methods||[])}catch(e){Q([])}},200);return()=>clearTimeout(e)},[N,c,m,F]);let G=(0,n.useMemo)(()=>{let e=new Map;for(let a of L)e.set(a.id,a);for(let a of H)if(!e.has(a.id)){let t={...a,category:a.category};e.set(a.id,t)}return Array.from(e.values())},[L,H]);(0,n.useEffect)(()=>{V||q("comparison"),G.length>0&&!C&&M(!0)},[V,G.length,C]);let I=(0,n.useMemo)(()=>V?(function(e){let a=h.find(a=>a.id===e);return a?v.filter(e=>a.methods.includes(e.category)||a.methods.includes(e.subcategory||"")):[]})(V).map(e=>({...e,category:e.category})):[],[V]);(0,n.useMemo)(()=>T&&_?x(T,_):null,[T,_]);let K=e=>{if(!_)return;let a=x(e,_);if(a.canUse||y.vF.warn("Method requirements not met",{warnings:a.warnings}),z(e),U(e),null==c?void 0:c.columns){let a=function(e,a){let t=a.filter(e=>"numeric"===e.type),i=a.filter(e=>"categorical"===e.type),n=a.filter(e=>"date"===e.type),s={};switch(e.category){case"t-test":if("one-sample-t"===e.id)t.length>0&&(s.dependentVar=t[0].name);else if("paired-t"===e.id)t.length>=2&&(s.variables=[t[0].name,t[1].name]);else if(t.length>0&&(s.dependentVar=t[0].name),i.length>0){let e=i.find(e=>2===e.uniqueValues);s.groupVar=e?e.name:i[0].name}break;case"anova":t.length>0&&(s.dependentVar=t[0].name),"two-way-anova"===e.id?i.length>=2?s.groupVar="".concat(i[0].name,",").concat(i[1].name):1===i.length&&(s.groupVar=i[0].name):i.length>0&&(s.groupVar=i[0].name);break;case"regression":if("logistic-regression"===e.id){let e=i.find(e=>2===e.uniqueValues);e&&(s.dependentVar=e.name,s.independentVar=t.map(e=>e.name))}else"multiple-regression"===e.id?t.length>=2&&(s.dependentVar=t[0].name,s.independentVar=t.slice(1).map(e=>e.name)):t.length>=2&&(s.dependentVar=t[0].name,s.independentVar=t[1].name);break;case"correlation":t.length>=2&&(s.variables=t.slice(0,5).map(e=>e.name));break;case"nonparametric":"chi-square"===e.id?i.length>=2&&(s.variables=[i[0].name,i[1].name]):"wilcoxon"===e.id?t.length>=2&&(s.variables=[t[0].name,t[1].name]):(t.length>0&&(s.dependentVar=t[0].name),i.length>0&&(s.groupVar=i[0].name));break;case"pca":s.variables=t.map(e=>e.name);break;case"clustering":s.variables=t.map(e=>e.name);break;case"timeseries":n.length>0&&(s.timeVar=n[0].name),t.length>0&&(s.dependentVar=t[0].name);break;case"survival":t.length>0&&(s.timeVar=t[0].name);let r=i.find(e=>2===e.uniqueValues);if(r&&(s.dependentVar=r.name),i.length>1){var l;s.groupVar=null==(l=i.find(e=>e!==r))?void 0:l.name}break;default:t.length>0&&(s.variables=[t[0].name])}return s}(e,c.columns.map(e=>({name:e.name,type:e.type,uniqueValues:e.uniqueValues,missing:e.missing})));D(a),W(a),R(!0)}};return(0,n.useEffect)(()=>{},[T,j]),(0,i.jsxs)("div",{className:"w-full h-full flex flex-col space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"무엇을 알고 싶으신가요? (선택사항)"}),(0,i.jsx)("textarea",{className:"w-full min-h-[80px] p-3 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"예: 남녀 간 키 차이가 있는지 알고 싶어요...",value:N,onChange:e=>k(e.target.value)})]}),(0,i.jsx)(f,{methods:G,selectedMethod:T,showRecommendations:C,onToggle:()=>M(!C),onMethodSelect:K,onQuestionTypeChange:q}),(0,i.jsxs)(l.tU,{value:V||void 0,onValueChange:e=>{q(e),z(null)},children:[(0,i.jsx)(l.j7,{className:"grid grid-cols-4 w-full",children:h.map(e=>(0,i.jsxs)(l.Xi,{value:e.id,className:"text-xs",children:[(0,i.jsx)("span",{className:"mr-1",children:e.icon}),(0,i.jsx)("span",{className:"hidden md:inline",children:e.name})]},e.id))}),h.map(e=>(0,i.jsxs)(l.av,{value:e.id,className:"space-y-3 mt-4",children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,i.jsx)(d,{methods:I,selectedMethod:T,dataProfile:_,onMethodSelect:K,checkMethodRequirements:x})]},e.id))]}),T&&(0,i.jsxs)(o.Fc,{className:"bg-green-50 dark:bg-green-950/20 border-green-200",children:[(0,i.jsx)(s.A,{className:"h-4 w-4"}),(0,i.jsxs)(o.TN,{children:[(0,i.jsx)("strong",{children:"선택된 방법:"})," ",T.name,T.requirements&&(0,i.jsxs)("div",{className:"mt-2 text-sm",children:[(0,i.jsx)("strong",{children:"요구사항:"}),(0,i.jsxs)("ul",{className:"mt-1 ml-4 list-disc",children:[T.requirements.minSampleSize&&(0,i.jsxs)("li",{children:["최소 ",T.requirements.minSampleSize,"개 샘플 필요"]}),null==(a=T.requirements.assumptions)?void 0:a.map((e,a)=>(0,i.jsx)("li",{children:e},a))]})]})]})]}),T&&A&&E&&(0,i.jsx)(p,{mapping:A,onClose:()=>R(!1)}),!_&&(0,i.jsxs)(o.Fc,{children:[(0,i.jsx)(r.A,{className:"h-4 w-4"}),(0,i.jsx)(o.TN,{children:"데이터 검증이 완료되지 않았습니다. 일부 추천 기능이 제한될 수 있습니다."})]})]})}},32559:(e,a,t)=>{t.d(a,{Fc:()=>l,TN:()=>c,XL:()=>o});var i=t(95155);t(12115);var n=t(83101),s=t(25016);let r=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:t,...n}=e;return(0,i.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,s.cn)(r({variant:t}),a),...n})}function o(e){let{className:a,...t}=e;return(0,i.jsx)("div",{"data-slot":"alert-title",className:(0,s.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...t})}function c(e){let{className:a,...t}=e;return(0,i.jsx)("div",{"data-slot":"alert-description",className:(0,s.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...t})}},32949:(e,a,t)=>{t.d(a,{vF:()=>n});class i{log(e,a,t){let i={level:e,message:a,data:t,timestamp:new Date};if(this.logs.push(i),this.logs.length>100&&this.logs.shift(),this.isDevelopment){let a=i.timestamp.toISOString();"[".concat(a,"] [").concat(e.toUpperCase(),"]")}this.isDevelopment}debug(e,a){this.log("debug",e,a)}info(e,a){this.log("info",e,a)}warn(e,a){this.log("warn",e,a)}error(e,a){this.log("error",e,a)}getRecentLogs(e){return[...e?this.logs.slice(-e):this.logs]}clear(){this.logs=[]}constructor(){this.isDevelopment=!1,this.logs=[]}}let n=new i},67812:(e,a,t)=>{t.d(a,{E:()=>o});var i=t(95155);t(12115);var n=t(32467),s=t(83101),r=t(25016);let l=(0,s.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",success:"border-transparent bg-green-500 text-white [a&]:hover:bg-green-600 dark:bg-green-600 dark:[a&]:hover:bg-green-700",warning:"border-transparent bg-yellow-500 text-white [a&]:hover:bg-yellow-600 dark:bg-yellow-600 dark:[a&]:hover:bg-yellow-700"}},defaultVariants:{variant:"default"}});function o(e){let{className:a,variant:t,asChild:s=!1,...o}=e,c=s?n.DX:"span";return(0,i.jsx)(c,{"data-slot":"badge",className:(0,r.cn)(l({variant:t}),a),...o})}},90923:(e,a,t)=>{t.d(a,{Xi:()=>o,av:()=>c,j7:()=>l,tU:()=>r});var i=t(95155);t(12115);var n=t(25667),s=t(25016);function r(e){let{className:a,...t}=e;return(0,i.jsx)(n.bL,{"data-slot":"tabs",className:(0,s.cn)("flex flex-col gap-2",a),...t})}function l(e){let{className:a,...t}=e;return(0,i.jsx)(n.B8,{"data-slot":"tabs-list",className:(0,s.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function o(e){let{className:a,...t}=e;return(0,i.jsx)(n.l9,{"data-slot":"tabs-trigger",className:(0,s.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function c(e){let{className:a,...t}=e;return(0,i.jsx)(n.UC,{"data-slot":"tabs-content",className:(0,s.cn)("flex-1 outline-none",a),...t})}}}]);