# 통계 분석 플랫폼 사전 준비 가이드

대규모 통계 프로젝트(예: 수십 개 분석 페이지와 공통 훅을 사용하는 플랫폼)를 시작하기 전에 반드시 점검해야 할 준비 항목을 정리했다. 이번 리팩토링 과정에서 발견된 문제점을 토대로 예방 중심으로 구성하였다.

## 1. 프로젝트 범위와 요구사항 명세
- **분석 기능 목록화**: 지원할 통계 기법, 페이지 수, 공통 UI/UX 요구사항을 목록으로 정리한다.
- **데이터 흐름 정의**: 업로드 → 변수 선택 → 분석 실행 → 결과 표시의 전형적 시나리오를 시퀀스 다이어그램으로 작성한다.
- **의존성 파악**: Pyodide, Recharts, UI 컴포넌트 등 핵심 라이브러리 버전과 지원 범위를 결정한다.
- **성공 기준 설정**: 성능(응답시간), 정확도(테스트 커버리지), 유지보수성(코딩 표준) 등 평가 지표를 문서화한다.

## 2. 아키텍처 및 패턴 설계
- **핵심 훅/서비스 설계 문서**: `useStatisticsPage`처럼 모든 페이지가 공유하는 훅의 상태 다이어그램과 메서드 계약서를 작성한다.
- **페이지 패턴 카탈로그**: Pattern A(UploadedData), Pattern B(VariableMapping) 등 기본 템플릿을 코드 예제와 함께 문서화한다.
- **상태 흐름 규칙**: `startAnalysis → completeAnalysis`처럼 필수 호출 순서를 TypeScript 타입/런타임 가드로 enforce할 계획을 세운다.
- **오류 처리 전략**: Pyodide 로딩 실패, 데이터 유효성 오류 등을 화면·로그에서 어떻게 표준화할지 결정한다.

## 3. 개발 환경 및 운영 통제
- **저장/포맷 정책**: 에디터 자동 저장·자동 포맷 사용 여부, 그리고 병렬 세션 간 충돌 방지 규칙을 명문화한다.
- **작업 락 체계**: 동일 파일/모듈을 동시에 수정하지 않도록 락 파일 혹은 작업 등록 보드를 운영한다.
- **실험 환경 분리**: 초안(VSCode), 자동화(CI), 배포 환경을 구분하고, 에이전트/스크립트가 접근할 권한을 조정한다.
- **릴리즈 계획**: 기능 배포 단위와 롤백 전략, 마이그레이션 단계별 일정표를 준비한다.

## 4. 검증 및 자동화 준비
- **커스텀 린트/검색 스크립트**: `rg "startAnalysis()"`, `rg "completeAnalysis"` 같은 규칙을 자동화하여 누락을 조기에 감지한다.
- **테스트 전략**: 단위 테스트, 통합 테스트, Pyodide 연계 테스트를 어떤 빈도로 실행할지 정한다.
- **CI 파이프라인**: lint → test → build 순서의 기본 파이프라인과 실패 시 알림 방식을 설정한다.
- **샘플 데이터 세트**: 대표적 데이터(소규모/대규모/결측 포함)를 사전에 준비해 수동 검증과 회귀 테스트에 사용한다.

## 5. 작업 분할 및 체크리스트
- **배치 계획**: 페이지/기능을 묶어 작업 단위를 정의하고, 각 배치마다 목표와 검증 항목을 명시한다.
- **체크리스트 템플릿**: 예) “상태 플래그 리셋 확인”, “Step 전환 테스트”, “문서 업데이트” 등 필수 항목을 공통 템플릿으로 만든다.
- **변경 로그 규칙**: 각 배치 완료 후 변경 요약, 영향도, 회고를 기록할 형식을 정한다.
- **릴리즈 게이트**: 체크리스트 완료, 자동 테스트 통과, 코드 리뷰 승인 등 통과 조건을 사전에 합의한다.

## 6. 커뮤니케이션 & 문서화
- **기술 결정 기록(ADR)**: 주요 아키텍처/도구 선택은 ADR 템플릿으로 기록하여 추후 근거를 남긴다.
- **작업 로그 채널**: 일일 진행 상황, 문제, 결정사항을 공유할 슬랙 채널, 노션 페이지 등을 마련한다.
- **온보딩 가이드**: 신규 기여자를 위한 프로젝트 구조, 스크립트 실행법, 표준 개발 흐름을 담은 문서를 준비한다.
- **회고 루틴**: 마일스톤 종료 후 회고를 정기적으로 수행하고, `lesson/` 폴더에 교훈을 저장한다.

## 7. 리스크 대응 계획
- **분석 실패 대응**: Pyodide 연산 실패, 메모리 부족 등 기술적 리스크에 대한 탐지/복구 절차를 문서화한다.
- **버전 관리 정책**: 브랜치 전략(Git Flow, Trunk-Based 등)과 태그·릴리즈 정책을 정한다.
- **보안/프라이버시 고려**: 업로드 데이터가 민감한 경우를 대비해 가이드라인과 마스킹/삭제 정책을 정의한다.
- **성능 모니터링**: 실행 시간, 메모리 사용량 등 지표 수집 방법을 사전에 설계한다.

---

이 문서는 향후 신규 프로젝트나 대규모 리팩토링 착수 시 체크리스트로 활용한다. 준비 단계에서 위 항목들을 충족하면 개발 중 겪는 충돌, 누락, 비일관성 문제를 크게 줄일 수 있다.
